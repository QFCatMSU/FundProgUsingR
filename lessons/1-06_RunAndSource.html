<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
  <meta charset="UTF-8">
  <noscript>
  <link rel="stylesheet" type="text/css" href="/content/DEVELOPMENT/2018/courses/DEV-belinsky-2018-BackendTest/Programming/editor.css">
  </noscript>
  <script src="https://cdn.jsdelivr.net/gh/QFCatMSU/OnlineClassBackEnd/module.js">
  </script>
</head>
<body>

<p class="previousLesson">Functions Introduction</p>
<p class="nextLesson">Outputs</p>
<h1 class="title" id="title">1-06: Run and Source</h1>
<h3>Changes...</h3>
<h2>Purpose</h2>
<ul>
<li>
<p>look at some of the features of R and RStudio</p>
</li>
<li>
<p>explore the differences between Run and Source</p>
</li>
</ul>
<h3>Files for the lesson</h3>
<p>The&nbsp;<a href="https://raw.githubusercontent.com/QFCatMSU/FundProgUsingR/master/scripts/1-06_RunAndSource.R" target="_blank" rel="noopener" title="">script for the lesson is here</a> (right-click, <em><strong>save link as...</strong></em>).</p>
<p>The&nbsp;<a href="../Scripts/twoWeekWeatherData.csv?_&amp;d2lSessionVal=E3dG9hOwbtH96KknXIbfYiST3&amp;ou=1247781" target="_blank" rel="noopener">data for this lesson is here</a> (just left-click)</p>
<p></p>
<p>In this lesson we will focus more on features in R and RStudio.&nbsp; In the next lesson we will talk more about the content of the script.</p>
<p></p>
<p>If you have any questions about the material in this lesson <em class="email">feel free to email them to the instructor here</em>.</p>
<h2>Output to console</h2>
<p>In the next couple of lesson we are going to<em class="note"> make extensive use</em> of the <em><strong>Console </strong></em>tab, which can be used to execute code and as output for your script file.&nbsp; Like the <em><strong>Environment </strong></em>tab, it is difficult to maintain images so I will use text instead.</p>
<p></p>
<p>For example:</p>
<ul>
<li>open the script for this lesson in your RStudio Project</li>
<li>click on line <strong>6</strong> (i.e., put the cursor on line 6)</li>
<li>click <em><strong>Run</strong></em></li>
</ul>
<p></p>
<p>The output will look like this:</p>
<p><img src="../Images/R-1-05%20Console.png" alt="" data-d2l-editor-default-img-style="true" class="fs" style="max-width: 100%;"></p>
<p class="fig">Output to the Console tab after executing line 6</p>
<p></p>
<p>I will display the output to the <em><strong>Console </strong></em>tab like this:</p>
<blockquote>
<p class="nn" title="Console">&gt; &nbsp; ### Output a text message<br>&gt; &nbsp; cat("Hello");&nbsp;<br>Hello</p>
</blockquote>
<p class="fig" id="onecommand">Output to the Console tab after executing line 6</p>
<h2>Run vs. Source</h2>
<p>The <em><strong>Source </strong></em>button is used to execute the whole script (i.e., every command in the script) while the <em><strong>Run </strong></em>button is used to selectively execute commands.&nbsp; <em><strong>Run </strong></em>is a great tool for debugging and testing your code and we are going to almost exclusively use <em><strong>Run </strong></em>for the next two lessons.&nbsp;</p>
<p></p>
<p>The next two lessons are more about showing off features in R and RStudio and not about creating a full script.&nbsp; However, your goal with most scripts is to be able to execute the file using <em><strong>Source</strong></em>.&nbsp; IT takes longer to develop you script using <em><strong>Source</strong></em> but it forces you to automate your script which makes your script both easier to debug and share.</p>
<h3>Executing one line</h3>
<p>We already have an example of using <em><strong>Run </strong></em>to execute one line in <em class="ref" id="r-onecommand">fig ##</em>.&nbsp; When we put the cursor on line <strong>6</strong> and clicked <em><strong>Run</strong></em>, R executed the <em><strong>cat()</strong></em> command on line <strong>6</strong>.&nbsp; We will talk much more about <em><strong>cat()</strong></em> next lesson but <em><strong>cat()</strong></em> outputs to the <em><strong>Console </strong></em>whatever is in the parentheses.</p>
<p></p>
<p class="">Actually, clicking <em><strong>Run </strong></em>does not just execute the line, but everything associate with the command on the line.&nbsp; When you look at the Console output, you see that lines <strong>5</strong> and <strong>6</strong> were both executed -- but line 5 was just a comment line so it does not do anything.</p>
<p class=""></p>
<blockquote>
<p class="nn" title="Console"><em class="hl">&gt;</em> &nbsp; ### Output a text message&nbsp;&nbsp; <br><em class="hl">&gt;</em> &nbsp; cat("Hello");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>Hello&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
</blockquote>
<p class="fig">Lines in Console that start with a ( <strong class="hl">&gt;</strong> ) are command lines</p>
<h3>Executing multiple commands on one line</h3>
<p>You can put as many command as you want on one line as long as use semicolons between them.</p>
<p></p>
<p>The following line has three commands that</p>
<ul>
<li>create two variables (<em><strong>a</strong></em> and <em><strong>b</strong></em>)</li>
<li>output the addition of them to the <em><strong>Console</strong></em>.&nbsp;</li>
</ul>
<blockquote>
<p title="9">&nbsp;a=3; b=7; cat("a+b=", a+b);</p>
</blockquote>
<p></p>
<p>Clicking <em><strong>Run </strong></em>on the line will add <em><strong>a</strong></em> and <em><strong>b</strong></em> to the <em><strong>Environment</strong></em>:</p>
<blockquote>
<p title="Environment" class="nn">a&nbsp;&nbsp; 3</p>
<p>b&nbsp;&nbsp; 7</p>
</blockquote>
<p></p>
<p>And the addition of <em><strong>a</strong></em> and <em><strong>b</strong></em> is displayed in the <em><strong>Console</strong></em>:</p>
<blockquote>
<p title="Console" class="nn">&gt; &nbsp; ### Multiple commands on one line<br>&gt; &nbsp; a=3; b=7; cat("a+b=", a+b);<br>a+b= 10</p>
</blockquote>
<p></p>
<p>If you remove the semicolons then you will get the error: <em class="hl">unexpected symbol in " &nbsp;a=3 b"&nbsp;&nbsp;</em></p>
<p>Basically, R is saying the it does not understand what the symbol <em><strong>b</strong></em> means because R thinks that <em><strong>b</strong></em> is still part of the <em><strong>a=3</strong></em> command.</p>
<h3>Executing highlighted script</h3>
<p>You can also highlight parts of your script and <em><strong>Run </strong></em>will executed exactly what is highlighted.</p>
<p></p>
<p>If you highlight lines 12, 13, and 14:</p>
<blockquote>
<p class="nn" title="12">&nbsp; cat("Hello, World.\n");<br>&nbsp; cat("How are you?\n");<br>&nbsp; cat("I am fine?\n");</p>
</blockquote>
<p></p>
<p>and click <em><strong>Run</strong></em>, the output to the <em><strong>Console </strong></em>is:<em class="note"></em></p>
<blockquote title="Console" class="nn">&gt; &nbsp; cat("Hello, World.\n");<br>Hello, World.<br>&gt; &nbsp; cat("How are you?\n");<br>How are you?<br>&gt; &nbsp; cat("I am fine?\n");<br>I am fine?</blockquote>
<p class="fig">Three commands sent to Console by clicking Run</p>
<p></p>
<p>Remember, when you highlight code,<em class="hl"> <strong>Run </strong>will execute exactly what you highlight</em>.&nbsp; In other words, R executes verbatim what you highlight.&nbsp; So, if you accidentally highlight a bit of line 11 along with lines 12-13:</p>
<blockquote>
<p title="11">&nbsp; ### Outputting multiple text messages <em class="hl">(\n means go to next line)</em><br><em class="hl">&nbsp; cat("Hello, World.\n");</em><br><em class="hl">&nbsp; cat("How are you?\n");</em><br><em class="hl">&nbsp; cat("I am fine?\n");</em></p>
</blockquote>
<p><em></em></p>
<p>Then in the <em><strong>Console </strong></em>you will get the error:</p>
<blockquote>
<p>&gt; (\n means go to next line)<br>Error: unexpected symbol in "(\n"</p>
</blockquote>
<p>R is trying to execute the last part of line 11 and it does not know it is part of a comment because you did not highlight the <strong>### </strong>part of the line.</p>
<h3>Executing one command on multiple lines</h3>
<p>Lines 17-20 contain the command to open the <em><strong>twoWeekWeatherData.csv</strong></em> file and save the data to a data frame named <em><strong>weatherData</strong></em>.</p>
<p></p>
<blockquote>
<p class="nn" title="17">&nbsp; ### read in data from &nbsp;twoWeekWeatherData.csv<br>&nbsp; weatherData = read.csv(file="data/twoWeekWeatherData.csv",&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sep=",",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;header=TRUE,&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stringsAsFactors = FALSE);</p>
</blockquote>
<p></p>
<p>If we put the cursor on line 17, 18, 19, or 20 and click <em><strong>Run</strong></em>, <em class="hl">R will execute all 4 lines</em>.&nbsp; When you click <em><strong>Run</strong></em>, R will execute whatever command the cursor is in the middle of.&nbsp; In this case, the command starts on line 17 and ends on line 20.</p>
<p></p>
<p>When we <em><strong>Run </strong></em>line <strong>17</strong>, the <em><strong>Console </strong></em>output shows lines 16-20 (16 is a comment) were executed -- the ( <strong class="hl">+</strong> ) at the beginning of the lines in the <em><strong>Console </strong></em>says that this line is a continuation of the command from the previous line.</p>
<blockquote>
<p class="nn" title="Console">&gt; &nbsp; ### read in data from &nbsp;twoWeekWeatherData.csv<br>&gt; &nbsp; weatherData = read.csv(file="data/twoWeekWeatherData.csv",&nbsp;<br><em class="hl">+</em> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sep=",",<br><em class="hl">+ </em>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;header=TRUE,&nbsp;<br><em class="hl">+</em> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stringsAsFactors = FALSE); &nbsp;</p>
</blockquote>
<p class="fig">Console output when executing the multi-line command to open the csv file</p>
<p></p>
<p>Executing lines 16-20 means that you have a new variable named <em><strong>weatherData </strong></em>and this variable is put in the <em><strong>Environment </strong></em>tab:</p>
<blockquote>
<p class="nn" title="Environment">weatherData&nbsp;&nbsp; 14 obs. of 5 variables</p>
</blockquote>
<p class="fig">The Environment tab after the read.csv() command was executed</p>
<h2>Entering commands directly into Console</h2>
<p>When you click <em><strong>Run </strong></em>you are sending commands to the <em><strong>Console</strong></em>, but you can type commands in the <em><strong>Console </strong></em>-- and it will produce the same results.</p>
<p></p>
<p>So, if you type <em><strong>cat("Hello") </strong></em>into the Console you will get:</p>
<blockquote>
<p class="nn" title="Console">&gt; cat("Hello")<br>Hello</p>
</blockquote>
<p></p>
<p>A common issue for people using the <em><strong>Console </strong></em>is that they will not complete commands.&nbsp; For example, type <strong>cat("He</strong> in the Console and press <em><strong>enter</strong></em>:</p>
<blockquote>
<p class="nn" title="Console">&gt; cat("He</p>
<p>+</p>
</blockquote>
<p></p>
<p>A ( <strong>+</strong> ) appears on the next line.&nbsp; The ( <strong>+</strong> ) means that the <em><strong>Console </strong></em>sees unfinished command and is waiting for you to finish it.&nbsp;<em class="hl"> This can also happen if you highlight only a partial command in the script and press Run</em>.&nbsp; You can finish it by typing<em><strong> llo")</strong></em> in the <em><strong>Console </strong></em>but the results will still be a bit off:</p>
<blockquote>
<p class="nn" title="Console">&gt; cat("He</p>
<p>+llo")</p>
<p>He</p>
<p>llo</p>
</blockquote>
<p></p>
<p>If you see a ( <em><strong>+</strong></em> ) in the <em><strong>Console </strong></em>and have no idea what to do, <em class="hl">you can press the <strong>esc </strong>key and get out of it</em>.</p>
<h3>Quick view of variables</h3>
<p>Another use for the <em><strong>Console </strong></em>is to quickly view some value.&nbsp; If you want to see the <em><strong>highTemp </strong></em>column in <em><strong>weatherData </strong></em>you can type in the <em><strong>Console</strong></em>:</p>
<p></p>
<blockquote>
<p title="Console" class="nn">&gt; weatherData$highTemp<br>&nbsp;[1] 57 50 54 40 39 58 60 53 55 44 39 54 61 75</p>
</blockquote>
<p></p>
<p class="note">Note: after you type <strong>$</strong> in <strong>weatherData$</strong>, RStudio will start offering you suggestions for which column you want.&nbsp;</p>
<h2>Duplicating lines of code</h2>
<p>Quite often in programming, you are producing multiple lines that are very similar.&nbsp; For instance, you might have multiple lines that start with a <em><strong>cat()</strong></em> command.&nbsp; In RStudio you can duplicate a line by putting your cursor on the line and clicking <em><strong>Control-Shift-D</strong></em> on Windows and <em><strong>Command-Shift-D</strong></em> on a Mac. &nbsp;</p>
<p></p>
<p>So, if you click <em><strong>Control/Command-Shift-D</strong></em> on line <em><strong>14</strong></em>, you will get:</p>
<blockquote>
<p title="11">&nbsp; ### Outputting multiple text messages<br>&nbsp; cat("Hello, World.");<br>&nbsp; cat("How are you?");<br>&nbsp; cat("I am fine?");&nbsp;<br>&nbsp;<em class="hl"> cat("I am fine?");</em></p>
</blockquote>
<p class="fig">Duplicating a line in RStudio using Control/Command-Shift-D</p>
<p></p>
<p>If you <em class="hl">highlight text</em> within your script and click <em><strong>Control/Command-Shift-D</strong></em>, then the highlighted text will be duplicated.&nbsp; In this case, I highlighted the first <em><strong>Hello, World.</strong></em> and then clicked <em><strong>Control/Command-Shift-D</strong></em>:</p>
<blockquote>
<p title="11">&nbsp; ### Outputting multiple text messages<br>&nbsp; cat("Hello, World.<em class="hl">Hello, World.</em>");<br>&nbsp; cat("How are you?");<br>&nbsp; cat("I am fine?");&nbsp;<br><em class="hl"></em></p>
</blockquote>
<p class="fig">Duplicating highlighted text in RStudio.</p>
<h2>Block Comments</h2>
<p>Often when you are testing code you want to comment lines so they do not execute.&nbsp; In RStudio you can comment a bunch of lines at once by highlighting the lines you want commented and clicking <em><strong>Control-Shift-C</strong></em> on Windows and <em><strong>Command-Shift-C</strong></em> on a Mac.</p>
<p></p>
<p>If you highlight lines 11-14 and press <em><strong>Control/Command-Shift-C</strong></em>, a ( <em class="hl"># </em>) will appear at the beginning of each line:</p>
<blockquote>
<p title="11"><em class="hl">#</em> ### Outputting multiple text messages<br><em class="hl">#</em> cat("Hello, World");<br><em class="hl">#</em> cat("How are you?");<br><em class="hl">#</em> cat("I am fine?");</p>
</blockquote>
<p class="" id="comment">Commenting multiple line by using Control/Command-Shift-C</p>
<p></p>
<p class="note">Note: A ( <strong>#</strong> ) is added to all highlighted lines -- even those that were already commented like line 11</p>
<h3>Uncommenting a block</h3>
<p>If all the lines highlighted already have a ( # ) then pressing<em><strong> Control/Command-Shift-C</strong></em> will uncomment all the lines (i.e., remove a #).&nbsp; Uncommenting only removed the first # -- so if you uncomment the lines from <em class="ref" id="r-comment">fig ##</em> then the lines will revert back to:</p>
<blockquote>
<p>### Outputting multiple text messages<br>cat("Hello, World");<br>cat("How are you?");<br>cat("I am fine?");</p>
</blockquote>
<p class="fig">Uncommenting lines -- only 1 # is removed so the first line is still commented</p>
<h2>Keyboard shortcuts in RStudio</h2>
<p>You can view all the keyboard shortcuts in RStudio by clicking <em><strong>Tools -&gt; Keyboard Shortcuts Help</strong></em>.</p>
<h2>Breaking up long lines of code</h2>
<p>Line 17-20 is one command stretched over multiple lines:</p>
<blockquote>
<p title="17">&nbsp; ### read in data from &nbsp;twoWeekWeatherData.csv<br>&nbsp; weatherData = read.csv(file="data/twoWeekWeatherData.csv",&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sep=",",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;header=TRUE,&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stringsAsFactors = FALSE); &nbsp;</p>
</blockquote>
<p></p>
<p>Just like a period ends a sentence,<em class="hl"> a semicolon designates the end of a statement</em>.&nbsp; In this case, the<em><strong> read.csv()</strong> </em>statement is four lines long so the semicolon goes at the end of the forth line.&nbsp; <em class="note">Again, R does not enforce semicolon usage, but it is a good idea to put them in.</em></p>
<p></p>
<p>We could put the whole command on one line and it would execute exactly the same:</p>
<blockquote>
<p title="22">&nbsp; ### same command as above -- this is ugly!<br>&nbsp; weatherData2 = read.csv(file="data/twoWeekWeatherData.csv", sep=",", header=TRUE, stringsAsFactors = FALSE);&nbsp;</p>
</blockquote>
<p></p>
<p><em><strong>weatherData2 </strong></em>appears in the <em><strong>Environment </strong></em>alongside <em><strong>weatherData</strong></em>, and it is exactly the same as <em><strong>weatherData</strong></em>:</p>
<blockquote>
<p title="Environment" class="nn">weatherData&nbsp; &nbsp;&nbsp; 14 obs. of 5 variables</p>
<p>weatherData2 &nbsp;&nbsp; 14 obs. of 5 variables</p>
</blockquote>
<p></p>
<p>But, it is much easier to read the multiple-line code.&nbsp; As a general rule, <em class="hl">you should try to avoid horizontal scrolling of your script </em>-- this makes it much harder to read.&nbsp;</p>
<p></p>
<p>In R, you can break most lines of code into multiple lines with a few exceptions (one being long file-paths). You just need to be judicious about how you break up the line -- the best places to break up a line of code are after a comma or where a space occurs.</p>
<h2>Putting margin lines in your script</h2>
<p>The generally accepted standard in R for the maximum number of characters in a line of code is 80.&nbsp; This is not a hard-and-fast rule, but keeping your lines 85 characters or less makes it a lot easier to read your code especially on smaller monitors (e.g., laptops).&nbsp; You can put a margin line at 85 characters in RStudio by clicking <em><strong>Tools -&gt; Global Options -&gt; Code.&nbsp;</strong></em>On the <em><strong>Display</strong> </em>tab check <em><strong>Show margin</strong> </em>and set <em><strong>Margin column</strong></em> to <strong>85.&nbsp; </strong><em class="hl">One of the requirements of the is that, when possible, you keep your script lines to 85 characters or less</em>.</p>
<p><strong></strong></p>
<p><strong><img src="../Images/R-01-06%20Line%20Margin.PNG" alt="" class="fs"></strong></p>
<p class="fig">Setting the line margin in RStudio.</p>
<p></p>
<p>Now you will see a grey vertical line at 85 characters (<em class="ref" id="r-margin">Fig.##</em>). The line is there as a guide -- you can still type beyond this line. There are times when it is not possible to keep a line to 85 characters -- the most common reason is a long file-path name because <em class="hl">file-path names cannot be broken up</em>.</p>
<p></p>
<p><img src="../Images/R-01-06%20Column%20line.PNG" alt="" class="fs"></p>
<p class="fig" id="margin">The grey line acts as a margin guide.&nbsp;</p>
<p></p>
<p class="note">Note: You can also see the cursor's character position is on in the lower-left corner (<em class="ref" id="r-margin">Fig.##</em>) -- in this case, character 98.</p>
<h2 class="" id="app">Application</h2>
<p>Copy the script for this lesson and name the copy <em><strong>app1-06.r</strong></em>.&nbsp; In the script file:</p>
<ol>
<li>Highlight lines 18 and 19 in the lesson script and click <em><strong>Run</strong></em>.&nbsp; In comments explain what happens and why.</li>
<li>Highlight lines 17, 18 and 19 in the lesson script and click <em><strong>Run</strong></em>.&nbsp; In comments explain what happens and why.</li>
<li>Combine the lines 12, 13, and 14 into one line -- don't change the <em><strong>cat()</strong></em> commands.</li>
<li>In comments answer the following questions:</li>
</ol>
<ul>
<li style="list-style-type: none;">
<ul>
<li>How many commands are there in the script file for this lesson?</li>
<li>Assuming there is no limit for line length (i.e., you can go as far beyond 85 characters as you want): If you rewrote the script, what is the minimum number of lines you would need to execute every command?</li>
</ul>
</li>
</ul>
<p style="text-align: left;"><br>Save the script as <em><strong>app1-06.r </strong></em>in your <em><strong>scripts </strong></em>folder and <em class="email">email your Project Folder to the instructor</em>.</p>
<p style="text-align: left;"></p>
<p class="" style="text-align: left;"><a href="1-01_Setup_and_RStudio_Projects.html#zip" target="_blank" rel="noopener">Instructions for zipping the Project Folder are here.</a></p>
<p style="text-align: left;"></p>
<p class="" style="text-align: left;"><em class="hl">If you have any questions regarding this application, feel free to</em> <em class="email">email them to the instructor here</em>.</p>
<h3>Questions to answer</h3>
<p>Answer the following in comments inside your application script:</p>
<ol>
<li>What was your level of comfort with the lesson/application?</li>
<li>What areas of the lesson/application confused or still confuses you?</li>
<li>What are some things you would like to know more about that is related to, but not covered in, this lesson?</li>
</ol>
<p></p>
<p></p>
</body></html>