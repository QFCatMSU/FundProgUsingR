<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.20">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>1-15: Functions and nested loops</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="_1-15_Functions3_files/libs/clipboard/clipboard.min.js"></script>
<script src="_1-15_Functions3_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="_1-15_Functions3_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="_1-15_Functions3_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="_1-15_Functions3_files/libs/quarto-html/popper.min.js"></script>
<script src="_1-15_Functions3_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="_1-15_Functions3_files/libs/quarto-html/anchor.min.js"></script>
<link href="_1-15_Functions3_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="_1-15_Functions3_files/libs/quarto-html/quarto-syntax-highlighting-bd0f20613ab34a035844aaae9062fb4e.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="_1-15_Functions3_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="_1-15_Functions3_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="_1-15_Functions3_files/libs/bootstrap/bootstrap-0abb7f8e0048341453ce325ab957e724.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">1-15: Functions and nested loops</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="sec-first" class="level3">
<h3 class="anchored" data-anchor-id="sec-first">To-Do</h3>
<ul>
<li>Add page number (PDF), remove header/footer</li>
<li>rename:</li>
</ul>
</section>
<section id="purpose" class="level2">
<h2 class="anchored" data-anchor-id="purpose">Purpose</h2>
<ul>
<li><p>embedded for loops</p></li>
<li><p>functions within a script</p></li>
<li><p>using matrices</p></li>
<li><p>named values in a vector</p></li>
</ul>
</section>
<section id="questions-about-the-material" class="level2">
<h2 class="anchored" data-anchor-id="questions-about-the-material">Questions about the material…</h2>
<p>The files for this lesson:</p>
<ul>
<li><p>Script (only one this lesson):&nbsp;<a href="../scripts/1-15_Functions3.R">you can download the script here</a></p></li>
<li><p>Data (should there be data?)</p></li>
</ul>
<p>&nbsp;</p>
<p>If you have any questions about the material in this lesson, feel free to email them to the instructor, <strong>?var:instructor.name</strong>, at <strong>?var:instructor.email</strong>.</p>
</section>
<section id="functions-within-a-script" class="level2">
<h2 class="anchored" data-anchor-id="functions-within-a-script">Functions within a script</h2>
<p>In the previous two lessons, we created a separate script for the functions. For this lesson, the functions used will be put inside the main script. This is not usually the best place to put functions (why this is true will be an application question). However, there are many occasions where you will see functions put directly inside a script, so it is good to be familiar with this practice.</p>
<section id="functions-like-variables-need-to-be-declared-first" class="level3">
<h3 class="anchored" data-anchor-id="functions-like-variables-need-to-be-declared-first">functions, like variables, need to be declared first</h3>
<p>Functions are like variables in that they store information to a named objects – and <span class="hl">objects must be declared before they are used</span>. If you are going to put a function directly in a script then you need to declare the function before you call the function.</p>
<p>&nbsp;</p>
<p>Examples of named objects:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>namedObj1 <span class="ot">=</span> <span class="st">"Hello"</span>;      <span class="co"># string variable</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>namedObj2 <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">7</span>,<span class="dv">1</span>);     <span class="co"># numeric vector</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>namedObj3 <span class="ot">=</span> <span class="cn">TRUE</span>;         <span class="co"># Boolean variable</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>namedObj4 <span class="ot">=</span> <span class="cf">function</span>(who) </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Hello"</span>, who, <span class="st">"how are you?"</span>);</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><span class="note">Note: unlike variables, functions have attached curly brackets because function can have multiple commands, requiring a codeblock.</span></p>
<p>&nbsp;</p>
<p>All of these object will appear in the <strong><em>Environment</em></strong>. The first three under <strong><em>Values</em></strong> and the last under <strong><em>Functions</em></strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" data-tab="Environment"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Values</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  namedObj1<span class="sc">:</span>  <span class="st">"Hello"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  namedObj2<span class="sc">:</span>  num [<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] <span class="dv">4</span> <span class="dv">7</span> <span class="dv">1</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  namedObj3<span class="sc">:</span>  <span class="cn">TRUE</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>Functions</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  namedObj4<span class="sc">:</span>  <span class="cf">function</span> (who)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="executing-the-function-in-script" class="level3">
<h3 class="anchored" data-anchor-id="executing-the-function-in-script">Executing the function in script</h3>
<p>The function <strong><em>namedObj4()</em></strong> can be used after it has been declared:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>( <span class="fu">namedObj4</span>(<span class="st">"llama"</span>) );</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" data-tab="Console"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Hello,llama, how are you?"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="embedded-for-loops" class="level2">
<h2 class="anchored" data-anchor-id="embedded-for-loops">Embedded for loops</h2>
<p>In the script for this lesson, we are going to look at two functions:</p>
<ul>
<li><p><strong><em>isPrime3()</em></strong>: a modification of <strong><em>isPrime2()</em></strong> from last lesson that checks any number of dividends (instead of one) for prime</p></li>
<li><p><strong><em>windChillMatrix()</em></strong>: takes a range of temperatures and wind speeds and creates a 2D vector (called a <strong><em>matrix</em></strong>) of wind chills</p></li>
</ul>
<p>&nbsp;</p>
<p>Both of these functions use <span class="hl">nested <strong><em>for</em></strong> loops</span>, or <strong><em>for</em></strong> loops that are inside <strong><em>for</em></strong> loops. Nested for loops are a staple of programming especially when you have data with multiple dimensions (e.g., heat index from a range of temperatures and humidity).</p>
</section>
<section id="checking-multiple-values-for-prime" class="level2">
<h2 class="anchored" data-anchor-id="checking-multiple-values-for-prime">Checking multiple values for prime</h2>
<p>For the first function, we have modified <strong><em>isPrime2()</em></strong> from last lesson so that it can now check multiple dividends for prime. For <strong><em>isPrime3()</em></strong>, the caller passes in a vector of numbers and <strong><em>isPrime3()</em></strong> will check through each number to see which are prime.</p>
<p>&nbsp;</p>
<p>The return value for <u><strong><em>isPrime3()</em></strong></u> is a Boolean vector that labels each dividend as prime (<strong>TRUE</strong>) or not prime (<strong>FALSE</strong>).</p>
<section id="examples-of-isprime3" class="level3">
<h3 class="anchored" data-anchor-id="examples-of-isprime3">Examples of isPrime3()</h3>
<p>Before we look at the code, let’s look at an example of its use:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>primeTest1 <span class="ot">=</span> <span class="fu">isPrime3</span>(<span class="fu">c</span>(<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">14</span>,<span class="dv">15</span>,<span class="dv">16</span>,<span class="dv">17</span>));</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>In the Environment, primeTest1 is called a <strong><em>Named logi</em></strong>.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6" data-tab="Environment"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>primeTest1<span class="sc">:</span> Named logi [<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>] <span class="cn">FALSE</span> <span class="cn">TRUE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">TRUE</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This means the values in the vector are named. You cannot see the names in the <strong><em>Environment</em></strong> but you can in the <strong><em>Console</em></strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" data-tab="Console"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> primeTest1</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>   <span class="dv">12</span>    <span class="dv">13</span>    <span class="dv">14</span>    <span class="dv">15</span>    <span class="dv">16</span>    <span class="dv">17</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span>  <span class="cn">TRUE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span>  <span class="cn">TRUE</span> </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The names are on the top row and the names are the numbers. The bottom row gives the Boolean values.</p>
</section>
<section id="named-values" class="level3">
<h3 class="anchored" data-anchor-id="named-values">Named values</h3>
<p>Let’s first look at the first two lines in the function to see how naming is set up:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>isPrime3 <span class="ot">=</span> <span class="cf">function</span>(dividends)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  «primeNum <span class="ot">=</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="cn">TRUE</span>, <span class="fu">length</span>(dividends)));»</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  «<span class="fu">names</span>(primeNum) <span class="ot">=</span> dividends;» </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(dividends))</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span>(dividends[i]<span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(dividends[i] <span class="sc">%%</span> j <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>        primeNum[i] <span class="ot">=</span> <span class="cn">FALSE</span>;</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(primeNum);</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong><em>rep()</em></strong> will create a vector that repeats a specific value n times so:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9" data-tab="Console"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">rep</span>(<span class="st">"a"</span>, <span class="dv">4</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"a"</span> <span class="st">"a"</span> <span class="st">"a"</span> <span class="st">"a"</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">rep</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">6</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="sc">-</span><span class="dv">2</span> <span class="sc">-</span><span class="dv">2</span> <span class="sc">-</span><span class="dv">2</span> <span class="sc">-</span><span class="dv">2</span> <span class="sc">-</span><span class="dv">2</span> <span class="sc">-</span><span class="dv">2</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong><em>primeNum</em></strong> starts as a vector with a bunch of <strong><em>TRUE</em></strong> values – the same as the number of dividends. The reason <strong><em>primeNum</em></strong> starts will all TRUE values is that the function assumes all dividends are prime, until proven otherwise. This will be described in much more detail when we go through the code.</p>
<p>&nbsp;</p>
<p>The second line turns <strong><em>primeNum</em></strong> into a named vector by giving each value in <strong><em>primeNum</em></strong> a name. In this case, the name is the same as the dividends passed in by the caller.</p>
<p>&nbsp;</p>
<p>You can manually create a named vector in the <strong><em>Console</em></strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10" data-tab="Console"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> myVec <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">names</span>(myVec) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"z"</span>, <span class="st">"y"</span>, <span class="st">"x"</span>, <span class="st">"w"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> myVec</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>z y x w </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong><em>names()</em></strong> is used to both set the names of vectors and display the names:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11" data-tab="Console"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">names</span>(myVec)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"z"</span> <span class="st">"y"</span> <span class="st">"x"</span> <span class="st">"w"</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">names</span>(myVec)[<span class="dv">3</span>]</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"x"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="nested-for-loops" class="level2">
<h2 class="anchored" data-anchor-id="nested-for-loops">Nested for loops</h2>
<p><strong><em>isPrime3()</em></strong> has two <strong><em>for</em></strong> loops:</p>
<ul>
<li><p>outer loop: indexes through the range of <strong><em>dividends</em></strong> supplied by the caller</p></li>
<li><p>inner loop: indexes through the range of divisors that will be used to check the dividend for prime</p>
<ul>
<li>range will be from 2 to one less than the dividend</li>
</ul></li>
</ul>
<section id="outer-loop" class="level3">
<h3 class="anchored" data-anchor-id="outer-loop">Outer loop</h3>
<p>The job of the outer loop is index <strong><em>dividends</em></strong> in the inner loop. It does this by cycling <strong><em>i</em></strong> from 1 to the number of value in dividends.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>  «<span class="fu">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(dividends))»</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span>(dividends[i]<span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(dividends[i] <span class="sc">%%</span> j <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>        primeNum[i] <span class="ot">=</span> <span class="cn">FALSE</span>;</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  «}»</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="inner-loop" class="level3">
<h3 class="anchored" data-anchor-id="inner-loop">Inner loop</h3>
<p><strong><em>isPrime2()</em></strong> needed a for loop to check the dividend to see if it was prime. That for loop is now the inner <strong><em>for</em></strong> loop in in <strong><em>isPrime3()</em></strong>. The inner <strong><em>for</em></strong> loop cycled through every single value from 2 to one less that the dividend, except the index variable is <strong><em>j,</em></strong> because <strong><em>i</em></strong> was used by the outer loop.</p>
<p>&nbsp;</p>
<p><a href="#extension-alternative-naming-to-i-and-j">Extension: alternative naming to i and j</a></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(vals))</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    «<span class="fu">for</span>(j <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span>(vals[i]<span class="sc">-</span><span class="dv">1</span>))»</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    «{»</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(vals[i] <span class="sc">%%</span> j <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>        primeNum[i] <span class="ot">=</span> <span class="cn">FALSE</span>;</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    «}»</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  }</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The main difference is there is now a vector of Boolean value to set instead of one value. And that vector, <strong><em>primeNum</em></strong>, gets indexed by the index of the outer loop, <strong><em>i,</em></strong> and <strong><em>i</em></strong> cycles from 1 to the length of <strong><em>dividends</em></strong>, which will also be the length of <strong><em>primeNum</em></strong>.</p>
</section>
<section id="set-up-the-return-value" class="level3">
<h3 class="anchored" data-anchor-id="set-up-the-return-value">Set up the return value</h3>
<p>The function returns a Boolean vector to the caller that is the same length as <strong><em>divendends</em></strong> the caller passed in .</p>
<p>&nbsp;</p>
<p>primeNum is a vector the length of dividends with initially all TRUE values. In other words, all dividends are prime until proven otherwise. The proof is here:</p>
<p>&nbsp;</p>
<p>The inner <strong><em>for</em></strong> loop goes through all possible divisors to try to prove the dividend is not prime. If one of the divisors divides the dividend evenly then we know the dividend is not prime and, in highlighted line 2, switch the single value in the vector <strong><em>primeNum</em></strong> to <strong>FALSE</strong>.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>isPrime3 <span class="ot">=</span> <span class="cf">function</span>(vals)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  «isPrime <span class="ot">=</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="cn">TRUE</span>, <span class="fu">length</span>(vals)));»  <span class="co">#1</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(isPrime) <span class="ot">=</span> vals;</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(vals))</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span>(vals[i]<span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(vals[i] <span class="sc">%%</span> j <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>        «isPrime[i] <span class="ot">=</span> <span class="cn">FALSE</span>;»   <span class="co">#2</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  «<span class="fu">return</span>(isPrime);»  <span class="co">#3</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Finally, we return <strong><em>primeNum</em></strong> back to the caller and <strong><em>primeNum</em></strong> gets save to the variable the caller set equal to the function.</p>
</section>
<section id="examples" class="level3">
<h3 class="anchored" data-anchor-id="examples">Examples &lt;??&gt;</h3>
<p>&lt;another example here? Console examples earlier and variable examples here?&gt;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</section>
</section>
<section id="a-matrix-of-values" class="level2">
<h2 class="anchored" data-anchor-id="a-matrix-of-values">A Matrix of values</h2>
<p>We have a second function that also uses nested <strong><em>for</em></strong> loops. In this case, the for loops are creating a two-dimensional vector called a <span class="hl">matrix</span>. The matrix contains wind chill values calculated from temperatures (rows) and wind speeds (columns)</p>
<p>&lt;image of matrix&gt;</p>
<section id="what-is-a-matrix" class="level3">
<h3 class="anchored" data-anchor-id="what-is-a-matrix">What is a matrix</h3>
<p>A matrix is a two-dimensional vector, or a vector with a defined number of rows and columns. In some ways, a matrix is like a data frame in that it has two-dimension but it functions more like a vector. There will be a larger lesson on matrices later…</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15" data-tab="Console"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">matrix</span>(<span class="at">data=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow=</span><span class="dv">4</span>, <span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>]</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">5</span>    <span class="dv">9</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">2</span>    <span class="dv">6</span>   <span class="dv">10</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">3</span>    <span class="dv">7</span>   <span class="dv">11</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]    <span class="dv">4</span>    <span class="dv">8</span>   <span class="dv">12</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>&lt;data types are all the same – across rows and columns (diff from data frame)&gt;</p>
<p>&lt;examples of creating a matrix in Console&gt;</p>
<p><a href="https://www.weather.gov/media/epz/wxcalc/windChill.pdf" class="uri">https://www.weather.gov/media/epz/wxcalc/windChill.pdf</a></p>
</section>
<section id="testing-the-function" class="level3">
<h3 class="anchored" data-anchor-id="testing-the-function">Testing the function</h3>
<p>&lt;before this give: name, args, return value&gt;</p>
<p>&lt;ranges of temp and wind speeds&gt;</p>
<p>&lt;note the row(temp) and column (wind speed) setup&gt;</p>
</section>
</section>
<section id="codeblock-matrix-setup-and-for-loops" class="level2">
<h2 class="anchored" data-anchor-id="codeblock-matrix-setup-and-for-loops">Codeblock: matrix setup and for loops</h2>
<p>Structuring is the most important part – proper structure makes <strong><em>for</em></strong> loops much easier to embed.</p>
<p>&nbsp;</p>
<p>Much like <strong><em>isPrime3()</em></strong>, one of the most important tasks is setting up the return value, which is a two-dimensional matrix whose length and width are determined by the number of temperature and wind speed values:</p>
<p>&nbsp;</p>
<p>Create the sequences based on user input</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>tempSeq <span class="ot">=</span> <span class="fu">seq</span>(tempStart, tempEnd, tempStep) </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>windSeq <span class="ot">=</span> <span class="fu">seq</span>(windStart, windEnd, windStep)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Get the length of each sequence (this is the number of rows and columns):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>  numRows <span class="ot">=</span> <span class="fu">length</span>(tempSeq);</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  numCols <span class="ot">=</span> <span class="fu">length</span>(windSeq);</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Create a blank matrix with the appropriate number of rows and columns:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>windChillTable <span class="ot">=</span> <span class="fu">matrix</span>(<span class="at">nrow=</span>numRows, <span class="at">ncol=</span>numCols); </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Give the rows and columns names that match the temperature and wind speed values they represent: &lt;more about the row and column setup&gt;</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(windChillTable) <span class="ot">=</span> tempSeq; </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(windChillTable) <span class="ot">=</span> windSeq;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><span class="note">Note: This is similar to creating a named vector</span></p>
<section id="for-loops-handling-matrix-rows-and-columns" class="level3">
<h3 class="anchored" data-anchor-id="for-loops-handling-matrix-rows-and-columns">for loops handling matrix rows and columns</h3>
<p>&lt;explcitly talk about the inner and out for loops and highlight them&gt;</p>
<p>&lt;change i,j to row, col&gt;</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>numRows)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>numCols)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>      windChillMatrix[i,j] <span class="ot">=</span> <span class="fl">35.74</span> <span class="sc">+</span> </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>                            <span class="fl">0.6215</span><span class="sc">*</span>tempSeq[i] <span class="sc">-</span> </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>                            <span class="fl">35.75</span><span class="sc">*</span>(windSeq[j]<span class="sc">^</span><span class="fl">0.16</span>) <span class="sc">+</span> </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>                            <span class="fl">0.4275</span><span class="sc">*</span>tempSeq[i]<span class="sc">*</span>(windSeq[j]<span class="sc">^</span><span class="fl">0.16</span>);</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  }</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>&lt;show cell structure&gt;</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Col1</th>
<th>Col2</th>
<th>Col3</th>
<th>Col4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>4</td>
<td>7</td>
<td>10</td>
</tr>
<tr class="even">
<td>2</td>
<td>5</td>
<td>8</td>
<td>11</td>
</tr>
<tr class="odd">
<td>3</td>
<td>6</td>
<td>9</td>
<td>12</td>
</tr>
</tbody>
</table>
<p><span class="note">note: the <strong><em>for</em></strong> loops can be reversed… this will be an application question</span></p>
</section>
<section id="populating-the-matrix" class="level3">
<h3 class="anchored" data-anchor-id="populating-the-matrix">Populating the matrix:</h3>
<p>This line of code calculates a wind chill based on the i<sup>th</sup> temperature and j<sup>th</sup> wind speed temperature values (based on the <a href="https://www.weather.gov/media/epz/wxcalc/windChill.pdf">wind chill formula given by the National Weather Service</a>) and adds the value to the <strong><em>windChillMatrix</em></strong> at the appropriate position:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>      windChillMatrix[i,j] <span class="ot">=</span> <span class="fl">35.74</span> <span class="sc">+</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>                            <span class="fl">0.6215</span><span class="sc">*</span>tempSeq[i] <span class="sc">-</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>                            <span class="fl">35.75</span><span class="sc">*</span>(windSeq[j]<span class="sc">^</span><span class="fl">0.16</span>) <span class="sc">+</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>                            <span class="fl">0.4275</span><span class="sc">*</span>tempSeq[i]<span class="sc">*</span>(windSeq[j]<span class="sc">^</span><span class="fl">0.16</span>);</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="return-the-matrix-back-to-the-caller" class="level3">
<h3 class="anchored" data-anchor-id="return-the-matrix-back-to-the-caller">REturn the matrix back to the caller</h3>
<p>The fully populated <strong><em>windChillMatrix</em></strong> is returned to the caller. When we look at it in RStudio, we can see the values</p>
<p>&nbsp;</p>
<p>&lt;View windChillMatrix in RStudio&gt;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</section>
</section>
<section id="application" class="level2">
<h2 class="anchored" data-anchor-id="application">Application</h2>
<p>1) What is the disadvantage of putting a function in the same script that it is called from?</p>
<p>How many times does the inner for loop get execute &lt;which function? both?&gt;</p>
<p>&nbsp;</p>
<p>2) REverse the for loops in the wind chill matrix…</p>
<ul>
<li><p>rows: speed, columns: temp</p></li>
<li><p>&lt;change the names of the indexing variables to something more meaningful &gt;</p></li>
</ul>
<p>&nbsp;</p>
<p>2) heat index matrix &lt;give formula&gt;</p>
<ul>
<li><p>error checking the matrix</p></li>
<li><p>Use X,Y as inputs, – show the output</p></li>
<li><p>temp: 0-120, hum: 0-100</p></li>
</ul>
<p>&nbsp;</p>
<p>3) find all connected #s within a List</p>
<ul>
<li><p>find pairs that evenly divide</p></li>
<li><p>return named vector</p>
<ul>
<li><p>dividend1: divisor1</p></li>
<li><p>dividend2: divisor2</p></li>
<li><p>So if you have the vector c(3,4,7,12,14,15)</p>
<ul>
<li>you have four answers: 3:12, 4:12, 7:14, 3:15</li>
</ul></li>
</ul></li>
</ul>
<p>&nbsp;</p>
<p>4) Create a function that finds the <span class="hl">difference in temperatures</span> between consecutive days and returns the temperature differences as a vector.</p>
<p>&nbsp;</p>
<p>So if you have four high temperatures: <strong>40, 45, 35, 42</strong>:</p>
<ul>
<li><p>the four calculations would be: <strong>(no calculation), (45-40), (35-45), (42-35)</strong></p></li>
<li><p>and the return vector would be:&nbsp; <strong>(NA, 5, -10, 7)</strong></p></li>
</ul>
<p><span class="note">Note: The first value of the return vector is always NA because there is nothing to subtract.</span></p>
<p><span class="note">Save you script file as <strong>app1-15.r</strong>&nbsp; in the <strong>scripts</strong> folder of your RStudio Project for the class.</span></p>
<p>&nbsp;</p>
<p>Test this with vectors you create</p>
<p>&nbsp;</p>
<p>Save the script as&nbsp;<strong><em>app1-15.r</em></strong> in your&nbsp;<strong><em>scripts</em></strong> folder and&nbsp; email your Project Folder to <strong>?var:instructor.name</strong> at <strong>?var:instructor.email</strong>.</p>
<p>&nbsp;</p>
<p><a href="1-01-RStudioProjectsSetup.html#sec-zip-folder" target="_blank">Instructions for zipping the Project Folder are here.</a></p>
<p>&nbsp;</p>
<p>If you have any questions regarding this application, feel free to email them to <strong>?var:instructor.name</strong> at <strong>?var:instructor.email</strong>.</p>
<section id="questions-to-answer" class="level3">
<h3 class="anchored" data-anchor-id="questions-to-answer">Questions to answer</h3>
<p>Answer the following in comments inside your application script:</p>
<ol type="1">
<li><p>What was your level of comfort with the lesson/application?</p></li>
<li><p>What areas of the lesson/application confused or still confuses you?</p></li>
<li><p>What are some things you would like to know more about that is related to, but not covered in, this lesson?</p></li>
</ol>
</section>
</section>
<section id="extension-alternative-naming-to-i-and-j" class="level2">
<h2 class="anchored" data-anchor-id="extension-alternative-naming-to-i-and-j">Extension: alternative naming to i and j</h2>
<p>In general, in programming the first, or outer, for loop uses i as its cycling value and the second, or inner, for loop uses j.</p>
<p>&nbsp;</p>
<p>This is not a hard-and-fast rule, and it is not necessarily best practice, but it is what we will use for now.</p>
<p>&lt;highlight i and j&gt;</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># does not handle one or two well isPrime3 = function(vals) {   isPrime = c(rep(TRUE, length(vals)));   names(isPrime) = vals;        for(i in 1:length(vals))   {     for(j in 2:(vals[i]-1))     {       if(vals[i] %% j == 0)       {         isPrime[i] = FALSE;       }     }   }   return(isPrime); }</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<section id="section" class="level3">
<h3 class="anchored" data-anchor-id="section"></h3>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>