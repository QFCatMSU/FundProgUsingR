<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.4">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>1-05: Functions Introduction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="shortcut icon" href="https://qfcatmsu.github.io/assets/quarto/qfc_icon.png">
<script>mod=true; menuCollapse=true;</script>
<script src="https://qfcatmsu.github.io/assets/quarto/qfc_styles.js"></script>
 


<link rel="stylesheet" href="https://qfcatmsu.github.io/assets/quarto/qfc_styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <a class="flex-grow-1 no-decor" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
          <h1 class="quarto-secondary-nav-title">1-05: Functions Introduction</h1>
        </a>     
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text"><b>Fundamentals of Programming class</b></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-02-Variables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-02: Variables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-03_Mathematical_Operations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-03: Mathematical Operations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-04_Vectors_And_Data_Frames.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-04: Vectors and Data Frames</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-05_Functions_Introduction.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">1-05: Functions Introduction</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title"><b>Lesson Content</b></h2>
   
  <ul>
  <li><a href="#changes" id="toc-changes" class="nav-link active" data-scroll-target="#changes"><span class="header-section-number">0.1</span> Changes…</a></li>
  <li><a href="#questions-to-answer" id="toc-questions-to-answer" class="nav-link" data-scroll-target="#questions-to-answer"><span class="header-section-number">0.2</span> Questions to answer</a></li>
  <li><a href="#purpose" id="toc-purpose" class="nav-link" data-scroll-target="#purpose"><span class="header-section-number">1</span> Purpose</a>
  <ul class="collapse">
  <li><a href="#files" id="toc-files" class="nav-link" data-scroll-target="#files"><span class="header-section-number">1.1</span> Files</a></li>
  </ul></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions"><span class="header-section-number">2</span> Functions</a></li>
  <li><a href="#arguments" id="toc-arguments" class="nav-link" data-scroll-target="#arguments"><span class="header-section-number">3</span> Arguments</a></li>
  <li><a href="#a-simpler-function-median" id="toc-a-simpler-function-median" class="nav-link" data-scroll-target="#a-simpler-function-median"><span class="header-section-number">4</span> A simpler function: median()</a>
  <ul class="collapse">
  <li><a href="#help-for-median" id="toc-help-for-median" class="nav-link" data-scroll-target="#help-for-median"><span class="header-section-number">4.1</span> Help for median()</a></li>
  <li><a href="#skipping-argument-names" id="toc-skipping-argument-names" class="nav-link" data-scroll-target="#skipping-argument-names"><span class="header-section-number">4.2</span> Skipping argument names</a></li>
  <li><a href="#default-argument-values" id="toc-default-argument-values" class="nav-link" data-scroll-target="#default-argument-values"><span class="header-section-number">4.3</span> Default argument values</a></li>
  <li><a href="#dealing-with-the-na" id="toc-dealing-with-the-na" class="nav-link" data-scroll-target="#dealing-with-the-na"><span class="header-section-number">4.4</span> Dealing with the NA</a></li>
  <li><a href="#alternate-ways-to-call-median" id="toc-alternate-ways-to-call-median" class="nav-link" data-scroll-target="#alternate-ways-to-call-median"><span class="header-section-number">4.5</span> Alternate ways to call median()</a></li>
  </ul></li>
  <li><a href="#help-seq" id="toc-help-seq" class="nav-link" data-scroll-target="#help-seq"><span class="header-section-number">5</span> Help seq()</a>
  <ul class="collapse">
  <li><a href="#the-arguments-and-defaults" id="toc-the-arguments-and-defaults" class="nav-link" data-scroll-target="#the-arguments-and-defaults"><span class="header-section-number">5.1</span> The arguments and defaults</a></li>
  <li><a href="#seq-examples" id="toc-seq-examples" class="nav-link" data-scroll-target="#seq-examples"><span class="header-section-number">5.2</span> <strong>seq()</strong> examples</a></li>
  </ul></li>
  <li><a href="#read.csv-expanded" id="toc-read.csv-expanded" class="nav-link" data-scroll-target="#read.csv-expanded"><span class="header-section-number">6</span> read.csv() expanded</a>
  <ul class="collapse">
  <li><a href="#read.csv-arguments" id="toc-read.csv-arguments" class="nav-link" data-scroll-target="#read.csv-arguments"><span class="header-section-number">6.1</span> read.csv arguments</a></li>
  <li><a href="#required-arguments-and-default-arguments" id="toc-required-arguments-and-default-arguments" class="nav-link" data-scroll-target="#required-arguments-and-default-arguments"><span class="header-section-number">6.2</span> Required arguments and default arguments</a></li>
  <li><a href="#the-other-arguments-aside-from-file" id="toc-the-other-arguments-aside-from-file" class="nav-link" data-scroll-target="#the-other-arguments-aside-from-file"><span class="header-section-number">6.3</span> The other arguments (aside from <strong><em>file</em></strong>)</a></li>
  </ul></li>
  <li><a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><span class="header-section-number">7</span> Application</a>
  <ul class="collapse">
  <li><a href="#questions-to-answer-1" id="toc-questions-to-answer-1" class="nav-link" data-scroll-target="#questions-to-answer-1"><span class="header-section-number">7.1</span> Questions to answer</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">1-05: Functions Introduction</h1>
</div>



<div class="quarto-title-meta column-page-right">

    
  
    
  </div>
  


</header>


<section id="changes" class="level3" data-number="0.1">
<h3 data-number="0.1" class="anchored" data-anchor-id="changes"><span class="header-section-number">0.1</span> Changes…</h3>
<p>Save the script as&nbsp;<strong><em>app1-05.r</em></strong> in your&nbsp;<strong><em>scripts</em></strong> folder and&nbsp;<em>email your Project Folder to the instructor</em>.</p>
<p>&nbsp;</p>
<p><a href="..\content/DEVELOPMENT/2020/courses/DEV-belinsky-2020-ProgrammingFundamentalsUsingR/R/Lessons/1-01_Setup_and_RStudio_Projects.html?ou=1247781#zip">Instructions for zipping the Project Folder are here.</a></p>
<p>&nbsp;</p>
<p>If you have any questions regarding this application, feel free to email them to Charlie Belinsky at belinsky@msu.edu.</p>
</section>
<section id="questions-to-answer" class="level3" data-number="0.2">
<h3 data-number="0.2" class="anchored" data-anchor-id="questions-to-answer"><span class="header-section-number">0.2</span> Questions to answer</h3>
<p>Answer the following in comments inside your application script:</p>
<ol type="1">
<li><p>What was your level of comfort with the lesson/application?</p></li>
<li><p>What areas of the lesson/application confused or still confuses you?</p></li>
<li><p>What are some things you would like to know more about that is related to, but not covered in, this lesson?</p></li>
</ol>
<ul>
<li><p>Add Trap to median() about how you do not want to do this (because R will think you are passing in 6 separate arguments):</p>
<ul>
<li></li>
<li><p>medianVal1 = median(3,4,6,2,7,3);</p></li>
<li></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>tempHigh <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">65</span>, <span class="dv">57</span>, <span class="dv">61</span>, <span class="dv">64</span>, <span class="dv">59</span>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="purpose" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="purpose"><span class="header-section-number">1</span> Purpose</h2>
<p>Explain how functions works and how to use the <strong><em>Help</em></strong> tab in RStudio.&nbsp; The presentation of functions in R is inconsistent but it is very useful to understand how to read a function help page.</p>
<section id="files" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="files"><span class="header-section-number">1.1</span> Files</h3>
<p>The&nbsp;<a href="https://raw.githubusercontent.com/QFCatMSU/FundProgUsingR/master/scripts/1-05_FunctionsIntroduction.R">script for the lesson is here</a></p>
<ul>
<li></li>
<li><p><em>right-click on the link</em> and choose <strong><em>Save link as…</em></strong></p></li>
<li></li>
<li><p>Save to the <strong><em>scripts</em></strong> folder in your Class Project</p></li>
<li></li>
</ul>
<p>The data used in this lesson, <a href="..\content/DEVELOPMENT/2020/courses/DEV-belinsky-2020-ProgrammingFundamentalsUsingR/R/Lessons/../Scripts/twoWeekWeatherData.csv">twoWeekWeatherData.csv</a></p>
<ul>
<li></li>
<li><p><em>left-click the link</em> and save to the <strong><em>data</em></strong> folder in your Class Project</p></li>
<li></li>
</ul>
</section>
</section>
<section id="functions" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="functions"><span class="header-section-number">2</span> Functions</h2>
<p>In the last lesson we used two functions in R:</p>
<ul>
<li></li>
<li><p><strong><em>read.csv():</em></strong> open up a CSV file and read in the data</p></li>
<li></li>
<li><p><strong><em>seq()</em></strong>: create a configurable sequence of numbers</p></li>
<li></li>
</ul>
<p>Functions are standalone scripts designed to do some repeatable operations.&nbsp; A function almost always takes input and sends a response.</p>
<p>In the case of <strong><em>read.csv()</em></strong> from last lesson:</p>
<p>&nbsp; weatherData = read.csv(file=“data/twoWeekWeatherData.csv”, # path to file</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sep=“,”,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # values are separated by commas</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; header=TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # there is a header row</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stringsAsFactors = FALSE); # for people using R 3.X</p>
<p>Calling <strong>read.csv()</strong> to get data from <strong>twoWeekWeatherData.csv</strong> and save it to <strong>weatherData</strong></p>
<p>The input is the values for <strong><em>file, sep, header</em></strong>, and <strong><em>stringsAsFactors</em></strong>.</p>
<p>The response is the data from the CSV file and this data gets saved to the variable <strong><em>weatherData</em></strong>.</p>
<p>In the case of <strong><em>seq()</em></strong>:</p>
<p>seq1 = seq(from=1, to=10, by=3);</p>
<p>The input is the values for <strong><em>from, to, and by</em></strong>.</p>
<p>The response is the sequence of numbers that gets saved to the variable <strong><em>seq1</em></strong>.</p>
</section>
<section id="arguments" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="arguments"><span class="header-section-number">3</span> Arguments</h2>
<p>In programming, the values you pass into a function(e.g., <strong><em>file, sep, header</em></strong>, and <strong><em>stringAsFactors</em></strong>) are called <em>arguments</em> of the function.&nbsp; Arguments are added to the function call to tweak the operation of the function – sort of like the knobs and dials for a function.</p>
<p>Most of the programming world uses the term <em>parameters</em> instead of <em>arguments</em>.&nbsp; I tend to like parameters better as I think it better indicates the fact that these values are properties of the function.&nbsp; But, R is a programming language for statisticians and <strong><em>arguments</em></strong> is a mathematical term so R chose to go with <strong><em>arguments</em></strong>.</p>
</section>
<section id="a-simpler-function-median" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="a-simpler-function-median"><span class="header-section-number">4</span> A simpler function: median()</h2>
<p>Let’s take a step back and look at a simpler function, <strong><em>median()</em></strong>, which takes a vector and finds the median value in the vector.</p>
<p>To use <strong><em>median()</em></strong> we need a vector with numeric values in it:</p>
<blockquote class="blockquote">
<p>vec1 = c(3,4,5,6,21,45,61);</p>
</blockquote>
<p>And then we pass <strong><em>vec1</em></strong> in as an argument to the <strong><em>median()</em></strong> function:</p>
<blockquote class="blockquote">
<p>medianVal1 = median(vec1);</p>
</blockquote>
<p>And the <strong><em>Environment</em></strong> says that the returned values, saved to <strong><em>medianVal1</em></strong> is <strong>6</strong></p>
<blockquote class="blockquote">
<p>medianVal1:&nbsp;&nbsp; 6</p>
</blockquote>
<section id="help-for-median" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="help-for-median"><span class="header-section-number">4.1</span> Help for median()</h3>
<p>Now let’s use RStudio’s <strong><em>Help</em></strong> tab to go behind-the-scenes of <strong><em>median()</em></strong>.&nbsp; RStudio <strong><em>Help</em></strong> tab is a useful resource for finding out more information on functions.&nbsp;</p>
<p>If we type <strong><em>median</em></strong> in the search bar we get this:</p>
<p>The median function in the Help tab in RStudio</p>
<p>The Help page shows that <strong><em>median()</em></strong> has two arguments:</p>
<ul>
<li></li>
<li><p><strong><em>x</em></strong>: the vector that you want to find the median for</p></li>
<li></li>
<li><p><strong><em>na.rm</em></strong>: a TRUE/FALSE value that determines how to handle NA values in the vector</p>
<ul>
<li></li>
<li><p><strong>NA</strong> means Not Available – usually indicating a problem with the data</p></li>
<li></li>
</ul></li>
<li></li>
</ul>
<p>Note: the ( … ) can be ignored – it is basically R saying that this function can be expanded with more arguments</p>
</section>
<section id="skipping-argument-names" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="skipping-argument-names"><span class="header-section-number">4.2</span> Skipping argument names</h3>
<p>When we called <strong><em>median()</em></strong>, we did not include any argument names:</p>
<blockquote class="blockquote">
<p>medianVal1 = median(vec1);</p>
</blockquote>
<p>However, since <strong><em>x</em></strong> is the first argument in <strong><em>median()</em></strong>, it is assumed that the first value is meant to be for <strong><em>x</em></strong>.</p>
<p>So, this is an equivalent call to <strong><em>median()</em></strong> that more explicitly says that the <strong><em>vec1</em></strong> is the value for <strong><em>x</em></strong>:</p>
<blockquote class="blockquote">
<p>medianVal1b = median(x=vec1);</p>
</blockquote>
<blockquote class="blockquote">
<p>medianVal1:&nbsp;&nbsp; 6</p>
<p>medianVal1b:&nbsp; 6</p>
</blockquote>
</section>
<section id="default-argument-values" class="level3" data-number="4.3">
<h3 data-number="4.3" class="anchored" data-anchor-id="default-argument-values"><span class="header-section-number">4.3</span> Default argument values</h3>
<p>The other argument in <strong><em>median()</em></strong>, <strong><em>na.rm</em></strong>, already has a value: <strong><em>FALSE</em></strong> .&nbsp;&nbsp; This means that <em>you do not have to supply a value for the argument <strong>na.rm</strong></em> when you call the function.&nbsp; You only need to supply a value if you want to change <strong><em>na.rm</em></strong> to something other than <strong>FALSE</strong> (e.g., <strong>TRUE</strong>).</p>
<p>Our first example did not have an <strong>NA</strong> values, let’s create a vector with an <strong>NA</strong> value in it:<em><br>
</em></p>
<blockquote class="blockquote">
<p>vec2 = c(3,4,5,NA,6,21,45,61);</p>
</blockquote>
<p>And then use that as an argument for <strong><em>median()</em></strong>:</p>
<blockquote class="blockquote">
<p>medianVal2 = median(x=vec2);</p>
</blockquote>
<p>This time the median value is <strong>NA</strong> because the median value for any vector that has an <strong>NA</strong> value is <strong>NA</strong> (essentially saying that median cannot be determined)</p>
<blockquote class="blockquote">
<p>medianVal2:&nbsp;&nbsp; NA_real_</p>
</blockquote>
<p>note: NA_real_ means an NA value that R thinks should be a real number</p>
</section>
<section id="dealing-with-the-na" class="level3" data-number="4.4">
<h3 data-number="4.4" class="anchored" data-anchor-id="dealing-with-the-na"><span class="header-section-number">4.4</span> Dealing with the NA</h3>
<p><strong><em>na.rm</em></strong> is the argument that determines whether <strong>NA</strong> values are removed from the vector – and the default value is <strong>FALSE</strong>, meaning <strong>NA</strong> values are not removed.&nbsp;</p>
<p>Let’s set <strong><em>na.rm</em></strong> to <strong>TRUE</strong> so the <strong>NA</strong> values are removed before finding the median:</p>
<blockquote class="blockquote">
<p>medianVal2b = median(x=vec2, na.rm=TRUE);</p>
</blockquote>
<p>Now, we get the same median value as before:</p>
<blockquote class="blockquote">
<p>medianVal2b:&nbsp;&nbsp; 6</p>
</blockquote>
</section>
<section id="alternate-ways-to-call-median" class="level3" data-number="4.5">
<h3 data-number="4.5" class="anchored" data-anchor-id="alternate-ways-to-call-median"><span class="header-section-number">4.5</span> Alternate ways to call median()</h3>
<p>Argument names (e.g., <strong><em>x</em></strong> and <strong><em>na.rm</em></strong>) are not needed if you put values in the correct order. All of these calls functionally do the same thing as the above <strong><em>median()</em></strong> call:</p>
<blockquote class="blockquote">
<p>medianVal2c = median(vec2, TRUE);</p>
<p>medianVal2d = median(vec2, na.rm=TRUE);</p>
<p>medianVal2e = median(na.rm=TRUE, x=vec2);&nbsp; # can reverse arguments if you name them</p>
<p>medianVal2f = median(x=vec2, TRUE);</p>
</blockquote>
<p>My general recommendation is to always use argument names when calling a function.&nbsp; This makes your code easier to read and you don’t have to worry about the order of the arguments.&nbsp; This is especially important when you are dealing with more complicated functions that have lots of arguments (e.g., plotting functions).</p>
</section>
</section>
<section id="help-seq" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="help-seq"><span class="header-section-number">5</span> Help seq()</h2>
<p>Unfortunately, the <strong><em>Help</em></strong> for functions can contain many abstractions and extraneous information. Throughout this course, we will open up the <strong><em>Help</em></strong> menu for new functions to get you more familiar with the abstractions.&nbsp;</p>
<p>Let’s look at the function <strong><em>seq()</em></strong>:</p>
<p>The Help page for the seq() function</p>
<p>When you see <strong><em>Default S3 Method</em></strong>, that is most likely the version of the function you care about.&nbsp; <strong><em>S3</em></strong> means <strong>S</strong> version <strong>3</strong>, <strong><em>S</em></strong> is a programming language developed in the 1970s and was the predecessor to R (yeah, that sounds a bit backward…).</p>
<p>seq() is an old function and the description of it&nbsp;</p>
<section id="the-arguments-and-defaults" class="level3" data-number="5.1">
<h3 data-number="5.1" class="anchored" data-anchor-id="the-arguments-and-defaults"><span class="header-section-number">5.1</span> The arguments and defaults</h3>
<p><strong><em>seq()</em></strong> has 5 arguments: <strong><em>from, to, by, length.out,</em></strong> and <strong><em>along.with</em></strong>.&nbsp; <strong><em>along.with</em></strong> is not needed and can be ignored (maybe in the past it was more useful).</p>
<p>The descriptions of the arguments in <em>fig ##</em> are helpful but the default argument values for <strong><em>seq()</em></strong> are misinformative:</p>
<blockquote class="blockquote">
<p>## Default S3 method<br>
seq(from = <em>1</em>, to = <em>1</em>, by = <em>((to - from)/(length.out - 1))</em>,<br>
&nbsp;&nbsp;&nbsp; length.out = <em>NULL</em>, along.with = <em>NULL</em>, …)</p>
</blockquote>
<p><strong><em>seq()</em></strong> essentially is solving for this equation (that should not have been shown as the default value for <strong><em>by</em></strong>):</p>
<p>by&nbsp;=&nbsp;to&nbsp;-&nbsp;fromlength.out&nbsp;-1{“version”:“1.1”,“math”:“&lt;math xmlns=”http://www.w3.org/1998/Math/MathML”&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;&nbsp;&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo&gt;&nbsp;&lt;/mo&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mo&gt;&nbsp;&lt;/mo&gt;&lt;mo&gt;-&lt;/mo&gt;&lt;mo&gt;&nbsp;&lt;/mo&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;g&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;&nbsp;&lt;/mo&gt;&lt;mo&gt;-&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/math&gt;“}</p>
<p>There are four variables in the equation and you have to give three of them as arguments.&nbsp; <strong><em>seq()</em></strong> will rearrange the formula, calculate the unknown fourth variable, and create the sequence.</p>
</section>
<section id="seq-examples" class="level3" data-number="5.2">
<h3 data-number="5.2" class="anchored" data-anchor-id="seq-examples"><span class="header-section-number">5.2</span> <strong>seq()</strong> examples</h3>
<p>If you set <strong><em>from</em></strong>, <strong><em>to</em></strong>, and <strong><em>by</em></strong> as we did for <strong><em>seq1,</em></strong> <strong><em>seq()</em></strong> will calculate <strong><em>length.out</em></strong> (the number of values in the sequence)</p>
<blockquote class="blockquote">
<p>seq1 = seq(from=1, to=10, by=3); &nbsp; # will have 4 values</p>
</blockquote>
<p>and give you the sequence:</p>
<blockquote class="blockquote">
<p>seq1:&nbsp;&nbsp; num[1:5] 1 4 7 10</p>
</blockquote>
<p><strong><em>length.out</em></strong> allows you to set the number of values in the sequence.&nbsp; You can also set <strong><em>length.out</em></strong> to a value, but then you can only use 2 of these 3 arguments: <strong><em>from</em></strong>, <strong><em>to</em></strong>, and <strong><em>by</em></strong>.</p>
<p>An example of using <strong><em>length.out</em></strong>:</p>
<blockquote class="blockquote">
<p>seq2 = seq(from=1, to=10, length.out=5);</p>
</blockquote>
<p>Then you get 5 evenly spaced number starting with 1 and ending with 10</p>
<blockquote class="blockquote">
<p>seq2:&nbsp;&nbsp; num[1:5] 1 3.25 5.5 7.75 10</p>
</blockquote>
</section>
</section>
<section id="read.csv-expanded" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="read.csv-expanded"><span class="header-section-number">6</span> read.csv() expanded</h2>
<p>When you go to the <strong><em>Help</em></strong> page for <strong><em>read.csv()</em></strong> , you are actually taken to the <strong><em>Help</em></strong> page for <strong><em>read.table()</em></strong>. This is because <strong><em>read.csv()</em></strong> is a version of the function <strong><em>read.table()</em></strong>.&nbsp; In other words, <strong><em>read.csv()</em></strong> is <strong><em>read.table()</em></strong> with different default values for the arguments (underlined in <em>Fig.##</em>).&nbsp;&nbsp;</p>
<p>For instance, the default value for <strong><em>sep</em></strong> (the separator) is a space in <strong><em>read.table()</em></strong> and a comma in <strong><em>read.csv()</em></strong>.&nbsp; <em>Note: some of the default arguments (e.g., <strong>quote</strong>, <strong>dec</strong>) in <strong>read.csv()</strong> are the same as in <strong>read.table().</strong></em></p>
<p>Using the Help tab in RStudio to look up functions</p>
<section id="read.csv-arguments" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="read.csv-arguments"><span class="header-section-number">6.1</span> read.csv arguments</h3>
<p>When you call <strong><em>read.csv()</em></strong>, you can use any of the argument from <strong><em>read.table()</em></strong>.</p>
<p>And there are a lot of arguments in <strong><em>read.table().</em></strong> The majority of these arguments rarely need to be changed from their default value.</p>
<p>Most of the arguments in <strong><em>read.table()</em></strong> look cryptic and you will probably never have to use them. A couple that are easier to understand:</p>
<ul>
<li></li>
<li><p><strong><em>decimal</em></strong>: the character that represents a decimal in the decimal number.&nbsp; You might need to change this to a comma ( , ) if you get data from Europe</p></li>
<li></li>
<li><p><strong><em>comment.char</em></strong>: the character after which everything on the line is a comment (i.e., not data)</p>
<ul>
<li></li>
<li><p>notice that <strong><em>read.csv()</em></strong> has no <strong><em>comment.char</em></strong> whereas <strong><em>read.table()</em></strong> uses ( <strong>#</strong> ) as the default <strong><em>comment.char</em></strong></p></li>
<li></li>
</ul></li>
<li></li>
</ul>
</section>
<section id="required-arguments-and-default-arguments" class="level3" data-number="6.2">
<h3 data-number="6.2" class="anchored" data-anchor-id="required-arguments-and-default-arguments"><span class="header-section-number">6.2</span> Required arguments and default arguments</h3>
<p><strong><em>file</em></strong> is the only argument not set equal to anything in <strong><em>read.table()</em></strong> / <strong><em>read.csv()</em></strong>.&nbsp; This is because <strong><em>file</em></strong> must be supplied by the user – <em><strong>file</strong> is the only required argument.</em>&nbsp; This should make sense as there is no point in calling <strong><em>read.table()</em></strong> / <strong><em>read.csv()</em></strong> without any data.</p>
<p>Every other argument in <strong><em>read.table()</em></strong> / <strong><em>read.csv()</em></strong> has a default value– this means you can execute the function without using any argument except <strong><em>file</em></strong>.</p>
<p>In fact, if you are using R version 4 then the following code will produce the same results as <em>the earlier <strong>read.csv()</strong> call in Fig.##</em>:</p>
<p>weatherData2 = read.csv(file = “data/twoWeekWeatherData.csv”);</p>
<p>If you look in the <strong><em>Environment</em></strong> tab the values for <strong><em>weatherData</em></strong> and <strong><em>weatherData2</em></strong> are exactly the same.</p>
<p>Expanding weatherData and weatherData2 in the Environment tab</p>
</section>
<section id="the-other-arguments-aside-from-file" class="level3" data-number="6.3">
<h3 data-number="6.3" class="anchored" data-anchor-id="the-other-arguments-aside-from-file"><span class="header-section-number">6.3</span> The other arguments (aside from <strong><em>file</em></strong>)</h3>
<p>In my original call to <strong><em>read.csv()</em></strong>, the arguments <strong><em>sep=“,”</em></strong> and <strong><em>header=TRUE</em></strong> are functionally not changing anything because I have them set to the same value as their default.&nbsp; But, these arguments are changed often enough that it is nice to have them quickly at hand when copying <strong><em>read.csv()</em></strong> from one script to another.</p>
<p><strong><em>stringsAsFactors</em></strong> tells R to treat any string columns as <strong><em>factors</em></strong>.A <em>factor</em> categorizes a vector into all of the unique values in the vector – each unique value is called a level.&nbsp; For instance a column that gives wind speed values in terms of <strong><em>low</em></strong>, <strong><em>medium</em></strong>, and <strong><em>high</em></strong> could be considered a column with 3 factor levels.&nbsp; Or, you can have a wind speed direction column with 4 factor levels: <strong><em>north, east, west</em></strong>, and <strong><em>south</em></strong>. &nbsp; I do not spend much time in the class on factors because the use of factors as a variable type use has declined quite a bit.&nbsp; For now, if you are using R version 4 and want to see how people using R version 3 see <strong>weatherData</strong> then execute this code:</p>
<blockquote class="blockquote">
<p>&nbsp;weatherData3 = read.csv(file=“data/twoWeekWeatherData.csv”,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; sep=“,”,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&nbsp; header=TRUE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; stringsAsFactors = <em>TRUE</em>); # this is the default for R v.3</p>
</blockquote>
</section>
</section>
<section id="application" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="application"><span class="header-section-number">7</span> Application</h2>
<p>Create a script file named <strong><em>app1-05.r</em></strong>.&nbsp; In the script file:</p>
<p>1. Create this sequence: <strong><em>13, 9, 5, 1, -3, -7, -11</em></strong> using <strong><em>seq()</em></strong>.</p>
<p>Come up with two more ways (three in all) to produce the same sequence using&nbsp;<strong><em>seq(),</em></strong> but changing the arguments (<strong><em>from, by, to, length.out</em></strong>).&nbsp;</p>
<p>2. Explain, in comments, why you get an error if you try to use all four arguments (<strong><em>from, by, to, length.out</em></strong>)</p>
<p>3. Find the log (base 5) of this vector: <strong>c(0.04, 0.2, 25, 125)</strong> using the <strong><em>log()</em></strong> function</p>
<ul>
<li></li>
<li><ul>
<li></li>
<li><p>Use the <strong><em>Help</em></strong> tab to find out more about the <strong><em>log()</em></strong> function</p></li>
<li></li>
<li><p>The answer is: <strong>-2, -1, 2, 3</strong> (so you can check)</p></li>
<li></li>
<li><p>note: the default value for <strong><em>base</em></strong> is <strong>exp(1)</strong> = e<sup>1</sup> = e = 2.71828… (i.e., the natural logarithm)</p></li>
<li></li>
</ul></li>
<li></li>
</ul>
<p>4. Properly read in <a href="..\content/DEVELOPMENT/2020/courses/DEV-belinsky-2020-ProgrammingFundamentalsUsingR/R/Lessons/../Data/twoWeekWeatherData_Comma.csv?isCourseFile=true">this CSV file</a> of the same two week weather data but:</p>
<ul>
<li></li>
<li><p>commas are used in place of decimals in precipitation column</p></li>
<li></li>
<li><p>spaces are used to separate variables (instead of commas)</p></li>
<li></li>
</ul>
<p>Save the data to a dataframe name <strong><em>WD_Comma</em></strong></p>
<p>5. In comments, answer: How many factors levels does the <strong><em>noonCondition</em></strong> column have?&nbsp; How about the <strong><em>date</em></strong> column?</p>
<p>Save the script as&nbsp;<strong><em>app1-05.r</em></strong> in your <strong><em>scripts</em></strong> folder and <em>email your Project Folder to the instructor</em>.</p>
<p><em>If you have any questions regarding this application, feel free to</em> <em>email them to the instructor here</em>.</p>
<section id="questions-to-answer-1" class="level3" data-number="7.1">
<h3 data-number="7.1" class="anchored" data-anchor-id="questions-to-answer-1"><span class="header-section-number">7.1</span> Questions to answer</h3>
<p>Answer the following in comments inside your application script:</p>
<ol type="1">
<li></li>
<li><p>What was your level of comfort with the lesson/application?</p></li>
<li></li>
<li><p>What areas of the lesson/application confused or still confuse you?</p></li>
<li></li>
<li><p>What are some things you would like to know more about that are related to, but not covered in, this lesson?</p></li>
<li></li>
</ol>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>