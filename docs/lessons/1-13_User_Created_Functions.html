<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>1-13: User Created Functions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-0ee72de42c60dbd072a9e85558b70db9.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="shortcut icon" href="https://qfcatmsu.github.io/assets/images/qfc_icon.png">
<script>mod=true; // menuCollapse=true;</script>
<script src="https://qfcatmsu.github.io/assets/quarto/qfc_styles.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="https://qfcatmsu.github.io/assets/quarto/qfc_styles.css">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <a class="flex-grow-1 no-decor" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
          <h1 class="quarto-secondary-nav-title">1-13: User Created Functions</h1>
        </a>     
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="quarto-sidebar-header"><div class="sidebar-header-item">
<p>I, Charlie, will be on vacation from Sept 28 - Oct 8. I will occasionally check email but don’t expect quick responses during this time!</p>
</div></div>
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text"><b>Fundamentals of Programming class</b></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/0-01-IntroductionAndSyllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction and Syllabus</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Part 1: Basic Programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-01-RStudioProjectsSetup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-01: RStudio Projects Setup</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-02-Variables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-02: Variables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-03_Mathematical_Operations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-03: Mathematical Operations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-04_Vectors_And_Data_Frames.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-04: Vectors and Data Frames</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-05_Functions_Introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-05: Functions Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-06_Run_and_Source.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-06: Run and Source</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-07_Outputs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-07: Outputs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-08_Conditional_Operations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-08: Conditional Operations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-09_If_Else_Statements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-09: If-Else Statements</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-10_For_Loops.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-10: For Loops</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-11_For_Loops_and_State_Varibles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-11: For Loops and State Variables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-12_MultipleConditions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-12: Multiple Conditions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-13_User_Created_Functions.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">1-13: User Created Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-14_Functions2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-14: Functions 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-15_Nested_Loops_and _Matrices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-15: Nested loops and Matrices</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Part 2: Data Programming</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-01_GGPlot_Intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-01: GGPlot Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-02_DataFrame_Modifications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-02: DataFrame Modifications</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-03_DataTypesAndDateFrames.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-03: Data Types and Data Frames</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-04_WhichStatements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-04: Which Statements</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-05_WhichAndSubstrings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-05: Which and Substrings</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-06_Datetime_Objects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-06: Datetime objects</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-07_Matrices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-07: Matrices</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-08_Binding_Sampling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-08: Binding and Sampling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-09_Stacking_Mapping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-09: Stacking and Mapping</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-10_Statistical_Tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-10: Statistical Tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-11_Objects_Attributes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-11: Objects and Attributes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-12_Lists.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-12: Lists</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-13_Breakpoints.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-13: Breakpoints</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-14_Debug_External_Scripts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-14: Debugging External Scripts (Unfinished)</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title"><b>Lesson Content</b></h2>
   
  <ul>
  <li><a href="#future-changes" id="toc-future-changes" class="nav-link active" data-scroll-target="#future-changes"><span class="header-section-number">0.1</span> Future changes</a></li>
  <li><a href="#purpose" id="toc-purpose" class="nav-link" data-scroll-target="#purpose"><span class="header-section-number">1</span> Purpose</a></li>
  <li><a href="#sec-downloads" id="toc-sec-downloads" class="nav-link" data-scroll-target="#sec-downloads"><span class="header-section-number">2</span> Questions about the material…</a></li>
  <li><a href="#four-structures-in-programming" id="toc-four-structures-in-programming" class="nav-link" data-scroll-target="#four-structures-in-programming"><span class="header-section-number">3</span> Four structures in programming</a></li>
  <li><a href="#reusable-scripts" id="toc-reusable-scripts" class="nav-link" data-scroll-target="#reusable-scripts"><span class="header-section-number">4</span> Reusable scripts</a></li>
  <li><a href="#using-a-function-script" id="toc-using-a-function-script" class="nav-link" data-scroll-target="#using-a-function-script"><span class="header-section-number">5</span> Using a function script</a>
  <ul class="collapse">
  <li><a href="#clearing-the-environment" id="toc-clearing-the-environment" class="nav-link" data-scroll-target="#clearing-the-environment"><span class="header-section-number">5.1</span> Clearing the Environment</a></li>
  </ul></li>
  <li><a href="#function-components" id="toc-function-components" class="nav-link" data-scroll-target="#function-components"><span class="header-section-number">6</span> Function components</a>
  <ul class="collapse">
  <li><a href="#function-codeblock" id="toc-function-codeblock" class="nav-link" data-scroll-target="#function-codeblock"><span class="header-section-number">6.1</span> function codeblock</a></li>
  <li><a href="#setting-argument-values" id="toc-setting-argument-values" class="nav-link" data-scroll-target="#setting-argument-values"><span class="header-section-number">6.2</span> Setting argument values</a></li>
  <li><a href="#default-values" id="toc-default-values" class="nav-link" data-scroll-target="#default-values"><span class="header-section-number">6.3</span> Default values</a></li>
  <li><a href="#changing-default-values" id="toc-changing-default-values" class="nav-link" data-scroll-target="#changing-default-values"><span class="header-section-number">6.4</span> Changing default values</a></li>
  <li><a href="#argument-order" id="toc-argument-order" class="nav-link" data-scroll-target="#argument-order"><span class="header-section-number">6.5</span> Argument order</a></li>
  </ul></li>
  <li><a href="#function-header" id="toc-function-header" class="nav-link" data-scroll-target="#function-header"><span class="header-section-number">7</span> Function header</a></li>
  <li><a href="#using-the-mean-functions" id="toc-using-the-mean-functions" class="nav-link" data-scroll-target="#using-the-mean-functions"><span class="header-section-number">8</span> Using the mean functions</a>
  <ul class="collapse">
  <li><a href="#return-value" id="toc-return-value" class="nav-link" data-scroll-target="#return-value"><span class="header-section-number">8.1</span> Return value</a></li>
  <li><a href="#calling-the-function" id="toc-calling-the-function" class="nav-link" data-scroll-target="#calling-the-function"><span class="header-section-number">8.2</span> Calling the function</a></li>
  </ul></li>
  <li><a href="#mean_advanced" id="toc-mean_advanced" class="nav-link" data-scroll-target="#mean_advanced"><span class="header-section-number">9</span> mean_advanced</a>
  <ul class="collapse">
  <li><a href="#header-line-of-a-function" id="toc-header-line-of-a-function" class="nav-link" data-scroll-target="#header-line-of-a-function"><span class="header-section-number">9.1</span> Header line of a function</a></li>
  <li><a href="#sec-mean_adv_code" id="toc-sec-mean_adv_code" class="nav-link" data-scroll-target="#sec-mean_adv_code"><span class="header-section-number">9.2</span> Codeblock</a></li>
  <li><a href="#return-ends-the-function" id="toc-return-ends-the-function" class="nav-link" data-scroll-target="#return-ends-the-function"><span class="header-section-number">9.3</span> return() ends the function</a></li>
  <li><a href="#using-the-function" id="toc-using-the-function" class="nav-link" data-scroll-target="#using-the-function"><span class="header-section-number">9.4</span> Using the function</a></li>
  </ul></li>
  <li><a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><span class="header-section-number">10</span> Application</a>
  <ul class="collapse">
  <li><a href="#questions-to-answer" id="toc-questions-to-answer" class="nav-link" data-scroll-target="#questions-to-answer"><span class="header-section-number">10.1</span> Questions to answer</a></li>
  </ul></li>
  <li><a href="#extension-functions-without-arguments" id="toc-extension-functions-without-arguments" class="nav-link" data-scroll-target="#extension-functions-without-arguments"><span class="header-section-number">11</span> Extension: Functions without arguments</a></li>
  <li><a href="#sec-r-base-mean" id="toc-sec-r-base-mean" class="nav-link" data-scroll-target="#sec-r-base-mean"><span class="header-section-number">12</span> Extension: The R-base mean() function</a>
  <ul class="collapse">
  <li><a href="#name" id="toc-name" class="nav-link" data-scroll-target="#name"><span class="header-section-number">12.1</span> Name</a></li>
  <li><a href="#arguments-inputs-to-a-function" id="toc-arguments-inputs-to-a-function" class="nav-link" data-scroll-target="#arguments-inputs-to-a-function"><span class="header-section-number">12.2</span> Arguments (inputs to a function)</a></li>
  <li><a href="#return-value-output-of-a-function" id="toc-return-value-output-of-a-function" class="nav-link" data-scroll-target="#return-value-output-of-a-function"><span class="header-section-number">12.3</span> Return value (output of a function)</a></li>
  <li><a href="#using-a-function" id="toc-using-a-function" class="nav-link" data-scroll-target="#using-a-function"><span class="header-section-number">12.4</span> Using a function</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">1-13: User Created Functions</h1>
</div>



<div class="quarto-title-meta column-page-right">

    
  
    
  </div>
  


</header>


<section id="future-changes" class="level3" data-number="0.1">
<h3 data-number="0.1" class="anchored" data-anchor-id="future-changes"><span class="header-section-number">0.1</span> Future changes</h3>
</section>
<section id="purpose" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="purpose"><span class="header-section-number">1</span> Purpose</h2>
<ul>
<li><p>Create reusable code (a function)</p></li>
<li><p>Use arguments in functions</p></li>
<li><p>Use return values in functions</p></li>
</ul>
</section>
<section id="sec-downloads" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="sec-downloads"><span class="header-section-number">2</span> Questions about the material…</h2>
<p>The files for this lesson:</p>
<ul>
<li><p>Main Script:&nbsp;<a href="../scripts/1-13_Functions_Main.R">download the main script here</a></p></li>
<li><p>Function Script: <a href="../scripts/1-13_Functions_Only.R">download the function script here</a></p></li>
</ul>
<p>&nbsp;</p>
<p>If you have any questions about the material in this lesson, feel free to email them to the instructor, Charlie Belinsky, at belinsky@msu.edu.</p>
</section>
<section id="four-structures-in-programming" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="four-structures-in-programming"><span class="header-section-number">3</span> Four structures in programming</h2>
<p>Once again, there are basically 4 main structures that cover almost every aspect of programming:</p>
<ol type="1">
<li><p>Variables</p></li>
<li><p>If-Else Statements</p></li>
<li><p>For Loops</p></li>
<li><p>Functions</p></li>
</ol>
<p>&nbsp;</p>
<p>And now we have reached the last structure: functions, which we will cover in the next few lessons. Functions allow you to write code once and reuse it as opposed to writing the same code multiple times.&nbsp;</p>
</section>
<section id="reusable-scripts" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="reusable-scripts"><span class="header-section-number">4</span> Reusable scripts</h2>
<p>Functions are self-contained codeblocks that performs a common task. For example, there are statistical functions that take a vector of values and return the statistical value (e.g., <strong><em>mean()</em></strong> and <strong><em>median()</em></strong>), functions that take data and create plots (e.g., <strong><em>plot(), boxplot()</em></strong>), and functions that interact with the <strong><em>Console</em></strong> (e.g., <strong><em>cat()</em></strong> and <strong><em>print()</em></strong>). The functions listed above are come with R and are designed to be used in any script.</p>
<p>&nbsp;</p>
<p>Broadly, there are three types of functions in R:</p>
<p>1) Base-R: these are function that come with R (e.g., <strong><em>mean(), median(), boxplot(), cat()</em></strong>)</p>
<ul>
<li>We covered these in lesson 1-05, and there is more here: <a href="#sec-r-base-mean">Extension: The R-base mean() function</a></li>
</ul>
<p>2) Packages: extensions of R (e.g., <strong><em>ggplot2</em></strong>, <strong><em>tidyverse</em></strong> – covered later in class)</p>
<p>3) User-created: the main focus of the next few lessons</p>
</section>
<section id="using-a-function-script" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="using-a-function-script"><span class="header-section-number">5</span> Using a function script</h2>
<p>There are two script files in this lesson:</p>
<ul>
<li><p><strong><em>1-13_Functions_Only.R</em></strong>: This script contains only user-generated functions</p></li>
<li><p><strong><em>1-13_Functions_Main.R</em></strong>: The main script that makes use of the functions in <strong><em>1-13_Functions_Only.R</em></strong></p></li>
</ul>
<p>So far we have used base-R functions. Now we are going to create our own (user-generated) functions. In general user-created functions are put in a separate script. This is done so that the functions can be used by multiple scripts, just like base-R functions can be used by any script.</p>
<p>&nbsp;</p>
<p>Because the functions are in a separate script, we must first read (<strong><em>source</em></strong>) the functions script from the main script before we can use the functions:</p>
<p>&nbsp;</p>
<p>This line in <strong><em>1-13_Functions_Main.R</em></strong> executes all code within the script <strong><em>1-13_Functions_Only.R</em></strong> (assuming it is in the <strong><em>scripts</em></strong> folder inside your project folder):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"scripts/1-13_Functions_Only.R"</span>);</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>R will put the three functions from <strong><em>1-13_Functions_Only.R</em></strong> into the <strong><em>Environment</em></strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" data-tab="Environment"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>hello_you<span class="sc">:</span>   <span class="cf">function</span> (who, <span class="at">feeling_good =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>mean_advanced<span class="sc">:</span>    <span class="cf">function</span> (vec, <span class="at">removeNA =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>mean_simple<span class="sc">:</span>  <span class="cf">function</span> (vec)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Functions, like variables, are named objects that store information. The difference is that <span class="hl">variables store values</span> whereas <span class="hl">functions store script</span>. User-generated functions must be in the <strong><em>Environment</em></strong> before they can be used.</p>
<section id="clearing-the-environment" class="level3" data-number="5.1">
<h3 data-number="5.1" class="anchored" data-anchor-id="clearing-the-environment"><span class="header-section-number">5.1</span> Clearing the Environment</h3>
<p>In all the precious lessons, every script includes this code at the top:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The purpose of this code is to clear out your <strong><em>Environment</em></strong> so that your script has a clean slate. In reality, it is to force programmers to include all the resources they need to run a script inside the script they are running (i.e., make the script self-contained). However, function scripts are resources for the main script and calling <code>rm(list=ls())</code> from the function script would clear the <strong><em>Environment</em></strong> of variables declared in the main script. <span class="hl">A function script should never clear the Environment</span>.</p>
</section>
</section>
<section id="function-components" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="function-components"><span class="header-section-number">6</span> Function components</h2>
<p>All functions, whether base-R, in packages, or user-created, have the same four components: <strong>name</strong>, <strong>arguments</strong>, <strong><em>codeblock</em></strong>, and <strong>return value</strong>.&nbsp;</p>
<p>&nbsp;</p>
<p>Let’s start with the simplest function in <strong><em>1-13_Functions_Only.R</em></strong>. This function is named <strong><em>hello_you()</em></strong>, has two arguments: <strong><em>who</em></strong> and <strong><em>feeling_good</em></strong>, and returns <strong><em>msg</em></strong> to the caller.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" data-tag="1-13_Functions_Only.R"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>«hello_you» <span class="ot">=</span> <span class="cf">function</span>(«who», «feeling_good»<span class="ot">=</span><span class="cn">TRUE</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>{ <span class="co"># start codeblock</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  msg <span class="ot">=</span> <span class="fu">paste0</span>(<span class="st">"Hello, "</span>, who)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(feeling_good <span class="sc">==</span> <span class="cn">FALSE</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    msg <span class="ot">=</span> <span class="fu">paste0</span>(msg, <span class="st">", I'm sorry you are not feeling well today!"</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(«msg»);</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>} <span class="co"># end codeblock</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><span class="note">note: when referring to a function name, we usually add <strong>( )</strong> to differentiate it from a variable</span></p>
<section id="function-codeblock" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="function-codeblock"><span class="header-section-number">6.1</span> function codeblock</h3>
<p>Functions, just like <strong><em>if()</em></strong> and <strong><em>for()</em></strong>, have codeblocks attached to them that are executed when the function is called. The codeblock is encapsulated with curly brackets <strong>{ }</strong>.</p>
<p>&nbsp;</p>
<p>A function codeblock operates like any other R code with two exceptions:</p>
<ul>
<li><p>The arguments in the function call (e.g., <strong><em>who</em></strong> and <strong><em>feeling_good</em></strong>) are variables used in the codeblock.</p></li>
<li><p>Functions usually return a value (e.g., <strong><em>msg</em></strong>) to the caller using <strong><em>return()</em></strong>.</p></li>
</ul>
</section>
<section id="setting-argument-values" class="level3" data-number="6.2">
<h3 data-number="6.2" class="anchored" data-anchor-id="setting-argument-values"><span class="header-section-number">6.2</span> Setting argument values</h3>
<p><strong><em>hello_you()</em></strong> is in the Environment so we can now call it in <strong><em>1-13_Functions_Main.R</em></strong>. Let’s first call the function using only the <strong><em>who</em></strong> argument:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" data-tag="1-13_Functions_Main.R"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>hi1 <span class="ot">=</span> <span class="fu">hello_you</span>(<span class="st">"Bob"</span>);</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>hi2 <span class="ot">=</span> <span class="fu">hello_you</span>(<span class="at">who=</span><span class="st">"Charlie"</span>);</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6" data-tab="Environment"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>hi1<span class="sc">:</span> <span class="st">"Hello, Bob"</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>hi2<span class="sc">:</span> <span class="st">"Hello, Charlie"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Since <strong><em>who</em></strong> is the first argument in <strong><em>hello_you()</em></strong>, R assumes the first value (i.e., “Bob”), if unnamed, is for the first argument . We can also explicitly name the argument (i.e., <strong><em>who</em></strong>=“Charlie”).</p>
<p>&nbsp;</p>
<p>In both cases, the function call is assigned to a variable (<strong><em>hi1</em></strong>, <strong><em>hi2</em></strong>). This means that <span class="hl">the return value of the function is assigned to the variable</span> (e.g., <strong><em>msg</em></strong>).</p>
<p>&nbsp;</p>
<p><span class="note">Note: if <strong><em>hello_you()</em></strong> is in the <strong><em>Environment</em></strong>, then you can also call it in the <strong><em>Console</em></strong>:</span></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" data-tab="Console"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">hello_you</span>(<span class="st">"Brad"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Hello, Brad"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">hello_you</span>(<span class="at">who=</span><span class="st">"Chuck"</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Hello, Chuck"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>In this case, the return value, <strong><em>msg</em></strong>, in outputted to the <strong><em>Console</em></strong></p>
</section>
<section id="default-values" class="level3" data-number="6.3">
<h3 data-number="6.3" class="anchored" data-anchor-id="default-values"><span class="header-section-number">6.3</span> Default values</h3>
<p>Most functions in R have default values for some of the argument. In <strong><em>hello_you()</em></strong>, <strong><em>feeling_good</em></strong> has the default value of <strong><em>TRUE</em></strong>. The caller must provide values for arguments that do not have default values and functions often have numerous arguments. In order to avoid overwhelming the caller, default values are provided for most arguments.</p>
<p>&nbsp;</p>
<p>Looking at the <strong><em>Help</em></strong> for <strong><em>boxplot()</em></strong>, we see that the <strong>Default S3 Method</strong> has many arguments but all of them, except <strong><em>x</em></strong>, has a default value. <strong><em>x</em></strong> is the data and the rest of the argument are tweaks to the function.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Default S3 method:</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(«x», ..., <span class="at">range =</span> <span class="fl">1.5</span>, <span class="at">width =</span> <span class="cn">NULL</span>, <span class="at">varwidth =</span> <span class="cn">FALSE</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">notch =</span> <span class="cn">FALSE</span>, <span class="at">outline =</span> <span class="cn">TRUE</span>, names, <span class="at">plot =</span> <span class="cn">TRUE</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">border =</span> <span class="fu">par</span>(<span class="st">"fg"</span>), <span class="at">col =</span> <span class="st">"lightgray"</span>, <span class="at">log =</span> <span class="st">""</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">pars =</span> <span class="fu">list</span>(<span class="at">boxwex =</span> <span class="fl">0.8</span>, <span class="at">staplewex =</span> <span class="fl">0.5</span>, <span class="at">outwex =</span> <span class="fl">0.5</span>),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">ann =</span> <span class="sc">!</span>add, <span class="at">horizontal =</span> <span class="cn">FALSE</span>, <span class="at">add =</span> <span class="cn">FALSE</span>, <span class="at">at =</span> <span class="cn">NULL</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="changing-default-values" class="level3" data-number="6.4">
<h3 data-number="6.4" class="anchored" data-anchor-id="changing-default-values"><span class="header-section-number">6.4</span> Changing default values</h3>
<p>Default values are generally what the programmer consider to be the most common values for the argument. In the case of <strong><em>hello_you()</em></strong>, we are assuming that the majority of people are feeling good so the the default value is <strong><em>TRUE</em></strong>.</p>
<p>&nbsp;</p>
<p>If someone is not feeling good, they change the value for the <strong><em>feeling_good</em></strong> argument:</p>
<p><code>{.r 1-13_Functions_Main.R=""} hi3 = hello_you("David", feeling_good=FALSE); hi4 = hello_you(who="Evelyn", feeling_good=FALSE); hi5 = hello_you("Frank", FALSE); hi6 = hello_you(feeling_good=FALSE, who="George");</code></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9" data-tab="Environment"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>hi3<span class="sc">:</span> <span class="st">"Hello, David, I'm sorry you are not feeling well today!"</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>hi4<span class="sc">:</span> <span class="st">"Hello, Evelyn, I'm sorry you are not feeling well today!"</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>hi5<span class="sc">:</span> <span class="st">"Hello, Frank, I'm sorry you are not feeling well today!"</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>hi6<span class="sc">:</span> <span class="st">"Hello, George, I'm sorry you are not feeling well today!"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><span class="note">note: the caller could set <strong><em>feeling_good</em></strong> to <strong><em>TRUE</em></strong>. It does not change the argument value but it makes the function call more explicit.</span></p>
</section>
<section id="argument-order" class="level3" data-number="6.5">
<h3 data-number="6.5" class="anchored" data-anchor-id="argument-order"><span class="header-section-number">6.5</span> Argument order</h3>
<p>In our last example, every function call uses both arguments: <strong><em>who</em></strong> and <strong><em>feeling_good</em></strong>. The argument names are not needed if the arguments are presented in the same order as given in the function:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>hi5 <span class="ot">=</span> <span class="fu">hello_you</span>(<span class="st">"Frank"</span>, <span class="cn">FALSE</span>);</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>On the flip side, using all argument names makes the function call more readable and you do not have to worry about order:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>hi4 <span class="ot">=</span> <span class="fu">hello_you</span>(<span class="at">who=</span><span class="st">"Evelyn"</span>, <span class="at">feeling_good=</span><span class="cn">FALSE</span>);</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>hi6 <span class="ot">=</span> <span class="fu">hello_you</span>(<span class="at">feeling_good=</span><span class="cn">FALSE</span>, <span class="at">who=</span><span class="st">"George"</span>);</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>For many R functions, the first argument is the data, and often left unnamed, whereas the rest of the arguments are typically named:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>hi3 <span class="ot">=</span> <span class="fu">hello_you</span>(<span class="st">"David"</span>, <span class="at">feeling_good=</span><span class="cn">FALSE</span>);</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>In general, I would argue that arguments beyond the first should be named for readability – especially when you have functions with many arguments.</p>
</section>
</section>
<section id="function-header" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="function-header"><span class="header-section-number">7</span> Function header</h2>
<p>The other two functions in <strong><em>1-13_Functions_Only.R</em></strong> calculate the mean of a vector.</p>
<p>&nbsp;</p>
<p>The four components of two mean functions are:</p>
<ul>
<li><p><strong>name</strong>: <strong><em>mean_simple()</em></strong> and <strong><em>mean_advanced()</em></strong></p></li>
<li><p><strong>arguments</strong>:</p>
<ul>
<li><p><strong><em>mean_simple()</em></strong> has one: <strong><em>vec</em></strong></p></li>
<li><p><strong><em>mean_advanced()</em></strong> has two: <strong><em>vec</em></strong> and <strong><em>removeNA</em></strong></p></li>
</ul></li>
<li><p><strong>codeblock</strong>: everything between ( <strong>{</strong> ) and ( <strong>}</strong> ) – this is the code that gets executed when the function is called</p></li>
<li><p><strong>return value</strong>: both functions return the mean value using <strong><em>return()</em></strong></p></li>
</ul>
</section>
<section id="using-the-mean-functions" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="using-the-mean-functions"><span class="header-section-number">8</span> Using the mean functions</h2>
<p>In the <strong><em>Environment</em></strong>, we see that <strong><em>mean_simple()</em></strong> has one argument, <strong><em>vec</em></strong>, that does not have a default value.</p>
<p>&nbsp;</p>
<p><strong><em>mean_simple()</em></strong> solves for the mean by cycling through all the values in <strong><em>vec</em></strong> using a <strong><em>for</em></strong> loop, adds the values, and then divides that by the number of values in <strong><em>vec</em></strong>.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13" data-tab="1-13_Functions_Only.R"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>mean_simple <span class="ot">=</span> <span class="cf">function</span>(«vec»)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  vecAdded <span class="ot">=</span> <span class="dv">0</span>; <span class="do">### state variable -- starts at 0</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">### Use the for loop to cycle through all the values in vec and add them to vecAdded</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(«vec»))</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="do">### Adds the next value in vec</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    vecAdded <span class="ot">=</span> vecAdded <span class="sc">+</span> «vec»[i];</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="do">### Divide the total value by the number of values to get the mean</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  meanVal <span class="ot">=</span> vecAdded <span class="sc">/</span> <span class="fu">length</span>(«vec»);</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="do">### return the mean value to the caller</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(«meanVal»);</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>} </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<section id="return-value" class="level3" data-number="8.1">
<h3 data-number="8.1" class="anchored" data-anchor-id="return-value"><span class="header-section-number">8.1</span> Return value</h3>
<p>From the caller’s perspective, a function takes arguments as input and returns a values as output. The return value is sent to the caller using the function <strong><em>return()</em></strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(meanVal);</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>When the caller calls the function, they often set a variable equal to the function (e.g., <strong><em>retVal</em></strong> in the code below). The return value is stored in the variable set equal to the function:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15" data-tab="1-13_Functions_Main.R"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>meanSimp1 <span class="ot">=</span> <span class="fu">mean_simple</span>(<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">7</span>));  <span class="co"># saves the return value (4.25) to the variable retVal</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="calling-the-function" class="level3" data-number="8.2">
<h3 data-number="8.2" class="anchored" data-anchor-id="calling-the-function"><span class="header-section-number">8.2</span> Calling the function</h3>
<p>We will call <strong><em>mean_simple()</em></strong> multiple times and save the results to four different variables:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16" data-tab="1-13_Functions_Main.R"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>meanSimp1 <span class="ot">=</span> <span class="fu">mean_simple</span>(<span class="at">vec=</span><span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">3</span>));        <span class="co"># 4.75</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># meanSimp2 = mean_simple();                    # error because argument not provided</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>meanSimp3 <span class="ot">=</span> <span class="fu">mean_simple</span>(<span class="at">vec=</span><span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">8</span>,<span class="dv">3</span>));   <span class="co"># NA_Real because of the NA </span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>meanSimp4 <span class="ot">=</span> <span class="fu">mean_simple</span>(<span class="at">vec=</span><span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">3</span>,<span class="dv">75</span>,<span class="dv">200</span>)); <span class="co"># 49</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>anotherVec <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="sc">-</span><span class="dv">7</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">8</span>);</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>meanSimp5 <span class="ot">=</span> <span class="fu">mean_simple</span>(<span class="at">vec=</span>anotherVec);        <span class="co"># can use a predefined vector</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Each call to the function <strong><em>mean()</em></strong> passes in a vector of values for the <strong><em>vec</em></strong> argument and saves the return value to a variable (<strong><em>ret2a</em></strong>, <strong><em>ret2b</em></strong>…). In the <strong><em>Environment</em></strong> we can see the return values stored in the variables.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17" data-tab="Environment"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>meanSimp1<span class="sc">:</span> <span class="fl">4.75</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>meanSimp2<span class="sc">:</span> <span class="cn">NA_real_</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>meanSimp3<span class="sc">:</span> <span class="dv">49</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>meanSimp4<span class="sc">:</span> <span class="dv">1</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><span class="note">note: the mean value of a vector with <strong><em>NA</em></strong> values is <strong><em>NA</em></strong>.</span> This is similar to <strong><em>median()</em></strong> in lesson 1-05. More about that here: <a href="#sec-r-base-mean">Extension: The R-base mean() function</a></p>
<hr>
</section>
</section>
<section id="mean_advanced" class="level2" data-number="9">
<h2 data-number="9" class="anchored" data-anchor-id="mean_advanced"><span class="header-section-number">9</span> mean_advanced</h2>
<p>Just like <strong><em>mean_simple()</em></strong>, the function, <strong><em>mean_advanced()</em></strong> solves for the mean by going through all the values in the caller-supplied vector, adding them up, and then dividing that answer by the number of values in <strong><em>vec</em></strong>. The difference is that <strong><em>mean_advanced()</em></strong> checks for <strong><em>NA</em></strong> values and gives the caller the option to remove them.</p>
<section id="header-line-of-a-function" class="level3" data-number="9.1">
<h3 data-number="9.1" class="anchored" data-anchor-id="header-line-of-a-function"><span class="header-section-number">9.1</span> Header line of a function</h3>
<p>The header for <strong><em>mean_advanced()</em></strong> looks similar to <strong><em>mean_simple()</em></strong> except there is a second argument, <strong><em>removeNA</em></strong>, and this argument has a default value of <strong>FALSE</strong>. This means if the caller does not set <strong><em>removeNA</em></strong>, it will be <strong>FALSE</strong> (i.e., <strong><em>NA</em></strong> values will <strong>not</strong> be removed).</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>mean_advanced <span class="ot">=</span> <span class="cf">function</span>(vec, <span class="at">removeNA =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="sec-mean_adv_code" class="level3" data-number="9.2">
<h3 data-number="9.2" class="anchored" data-anchor-id="sec-mean_adv_code"><span class="header-section-number">9.2</span> Codeblock</h3>
<p>In the codeblock attached to <strong><em>mean_advanced()</em></strong>, we need to conditionally handle the situation where <strong><em>NA</em></strong> values are to be removed, based on the value of the argument <strong><em>removeNA</em></strong>. We do this using an <code>if-else-if</code> structure inside the <code>for</code> loop.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19" data-tab="1-13_Functions_Only.R"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>mean_advanced <span class="ot">=</span> <span class="cf">function</span>(vec, <span class="at">removeNA =</span> <span class="cn">FALSE</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  vecAdded <span class="ot">=</span> <span class="dv">0</span>; <span class="do">### state variable -- starts at 0</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  numNA <span class="ot">=</span> <span class="dv">0</span>;    <span class="do">### second state variable that counts the number of NA values</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="do">### Use the for loop to cycle through all the values in vec and add them to vecAdded</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(vec))</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    «if»(<span class="fu">is.na</span>(vec[i]) <span class="sc">==</span> <span class="cn">FALSE</span>)  <span class="do">### If the value is not NA</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>      <span class="do">### Adds the next value in vec</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>      vecAdded <span class="ot">=</span> vecAdded <span class="sc">+</span> vec[i];</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    }«else if» (removeNA <span class="sc">==</span> <span class="cn">TRUE</span>)   <span class="do">## we have a NA value and want to remove it</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>      <span class="do">### Don't add the value, instead increase the number of NA by 1</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>      numNA <span class="ot">=</span> numNA <span class="sc">+</span><span class="dv">1</span>;</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>    }«else if» (removeNA <span class="sc">==</span> <span class="cn">FALSE</span>)  <span class="do">## we have a NA value and don't want to remove it</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>      <span class="do">### We cannot solve for a mean with an NA so the return value has to be NA</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(<span class="cn">NA</span>);  <span class="co"># this will end the function</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>    <span class="do">### Divide the total value by the number of values that are not NA to get the mean</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>    meanVal <span class="ot">=</span> vecAdded <span class="sc">/</span> ( <span class="fu">length</span>(vec) <span class="sc">-</span> numNA);</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>    <span class="do">### return the mean value to the caller</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(meanVal);</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>  }</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>There are three possible situations, hence three parts to the <strong><em>if-else-if</em></strong> structure:</p>
<ol type="1">
<li><code>if(is.na(vec[i]) == FALSE)  # The current vec value is not NA</code>
<ul>
<li>The <strong><em>i</em></strong><sup>th</sup> value is not <strong><em>NA</em></strong> (i.e., it’s a number), so add the number to the total</li>
</ul></li>
<li><code>else if (removeNA == TRUE)  # We have a NA value and want to remove it</code>
<ul>
<li>ignore the <strong><em>NA</em></strong> value and add 1 to the number of <strong><em>NA</em></strong> values</li>
</ul></li>
<li><code>else if (removeNA == FALSE) # We have a NA value and don't want to remove it</code>
<ul>
<li>at this point, we know the return value has to be <strong><em>NA</em></strong> – so return <strong><em>NA</em></strong></li>
</ul></li>
</ol>
</section>
<section id="return-ends-the-function" class="level3" data-number="9.3">
<h3 data-number="9.3" class="anchored" data-anchor-id="return-ends-the-function"><span class="header-section-number">9.3</span> return() ends the function</h3>
<p>Just like <strong><em>break</em></strong> immediately ends a <strong><em>for</em></strong> loop, <span class="hl"><strong><em>return()</em></strong> immediately ends a function</span>.</p>
<p>&nbsp;</p>
<p>There are two <strong><em>return()</em></strong> statements in this function:</p>
<ol type="1">
<li><p>Once an <strong><em>NA</em></strong> value is hit, and the caller did not ask for <strong><em>NA</em></strong> values to be removed. At this point we know the answer is <strong><em>NA</em></strong>. There is no point in checking any more values in the vector. We put a <strong><em>return()</em></strong> to end the function and pass <strong><em>NA</em></strong> back to the caller</p></li>
<li><p>At the end of the codeblock after the <strong><em>for</em></strong> loop cycles through all the values in the vector.</p></li>
</ol>
<p>&nbsp;</p>
<p>Since <code>return()</code> ends a function, only one <code>return()</code> can be executed per function call.</p>
</section>
<section id="using-the-function" class="level3" data-number="9.4">
<h3 data-number="9.4" class="anchored" data-anchor-id="using-the-function"><span class="header-section-number">9.4</span> Using the function</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20" data-tab="1-13_Functions_Script.R"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>meanAdv1 <span class="ot">=</span> <span class="fu">mean_advanced</span>(<span class="at">vec=</span><span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">3</span>));       <span class="co"># 4.75</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># meanAdv2 = mean_advanced();                   # will cause error because argument not provided </span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>meanAdv3 <span class="ot">=</span> <span class="fu">mean_advanced</span>(<span class="at">vec=</span><span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">8</span>,<span class="dv">3</span>));  <span class="co"># will be NA (removeNA default is FALSE)</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>meanAdv4 <span class="ot">=</span> <span class="fu">mean_advanced</span>(<span class="at">vec=</span><span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">8</span>,<span class="dv">3</span>), <span class="at">removeNA =</span> <span class="cn">TRUE</span>);  <span class="co"># 4.75</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>meanAdv5 <span class="ot">=</span> <span class="fu">mean_advanced</span>(<span class="at">vec=</span><span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">3</span>, <span class="dv">75</span>,<span class="dv">200</span>)); <span class="co"># 49</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Each line of code above calls the function <strong><em>mean_advanced()</em></strong>, passes in values for one or more arguments, and saves the return value from the function to a variable (<strong><em>ret3a</em></strong>, <strong><em>ret3b</em></strong>…). In the <strong><em>Environment</em></strong> we can see the return values stored in the variables.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21" data-tab="Environment"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>meanAdv1<span class="sc">:</span>  <span class="fl">4.75</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>meanAdv3<span class="sc">:</span>  <span class="cn">NA_real_</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>meanAdv4<span class="sc">:</span>  <span class="fl">4.75</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>meanAdv5<span class="sc">:</span>  <span class="dv">49</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="application" class="level2" data-number="10">
<h2 data-number="10" class="anchored" data-anchor-id="application"><span class="header-section-number">10</span> Application</h2>
<p>1) For this application you need to…</p>
<ol type="a">
<li><p>Create two scripts:</p>
<ul>
<li><p>a functions script named <strong><em>app1-13_functions.r</em></strong> that contains the functions created in this application</p></li>
<li><p>a main script named <strong><em>app1-13.r</em></strong> where you will answer questions in comments and test the functions created in <strong><em>app1-13_functions.r</em></strong></p></li>
</ul></li>
<li><p><strong><em>source()</em></strong> your functions script from the main script</p></li>
<li><p><span class="hl">Make sure you thoroughly test all the functions you create in your main script.</span> I want to see the test code in <strong><em>app1-13.r</em></strong>.</p></li>
</ol>
<p>&nbsp;</p>
<p>2) For the function <strong><em>mean_advanced()</em></strong>, answer the following questions in comments in the main script:</p>
<ol type="a">
<li><p>Why do we count the number of <strong><em>NA</em></strong>s?</p></li>
<li><p>For the two <strong><em>else if</em></strong> statements, what assumption can be made about the <strong><em>i</em></strong><sup>th</sup> value being checked? Why can we make this assumption?</p></li>
<li><p>Why does <strong><em>removeNA</em></strong> have a default value but <strong><em>vec</em></strong> does not?</p></li>
<li><p>Under what circumstances, if any, will this line <strong><em>not</em></strong> be executed?</p></li>
</ol>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>meanVal <span class="ot">=</span> vecAdded <span class="sc">/</span> ( <span class="fu">length</span>(vec) <span class="sc">-</span> numNA);</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>3) Create a function that returns either the standard deviation (default) or variance of a vector:</p>
<ul>
<li><p>There should be two arguments: (1) the vector and (2) something that allows the caller choose whether they want the standard deviation or the variance of the vector.</p></li>
<li><p>Do not use <strong><em>var()</em></strong> or <strong><em>sd()</em></strong> – use your own formula. You can use the code from the application in lesson 1-03 as a starting point.</p></li>
</ul>
<p>&nbsp;</p>
<p>4) Create a function that converts a temperature from either Celsius to Fahrenheit (default) or Fahrenheit to Celsius</p>
<ul>
<li><p>The conversion from Celsius to Fahrenheit is: <span class="math inline">\(F=\frac{9}{5} C+32\)</span></p></li>
<li><p>The user needs to pass in two arguments: (1) the temperature value and (2) which direction they want to convert</p></li>
</ul>
<p>&nbsp;</p>
<p>5) Create a function that takes a single number from 0 to 100 and returns a grade from A to F.&nbsp;</p>
<ul>
<li>Return an error if the number is less than 0 and return a different error if the number is greater than 100.</li>
</ul>
<p>&nbsp;</p>
<p>6) Create a function that takes a vector of numbers and returns the percentage of values that are above 60.</p>
<ul>
<li><p>Have the function ignore values less than 0 or greater than 100</p></li>
<li><p>Test the function with 25 random numbers from -20 to 120</p>
<ul>
<li><code>sample(-20:120, size=25);</code></li>
</ul></li>
</ul>
<p>&nbsp;</p>
<p>Save the script as&nbsp;<strong><em>app1-13.r</em></strong> in your&nbsp;<strong><em>scripts</em></strong> folder and&nbsp; email your Project Folder to Charlie Belinsky at belinsky@msu.edu.</p>
<p>&nbsp;</p>
<p><a href="1-01-RStudioProjectsSetup.html#sec-zip-folder" target="_blank">Instructions for zipping the Project Folder are here.</a></p>
<p>&nbsp;</p>
<p>If you have any questions regarding this application, feel free to email them to Charlie Belinsky at belinsky@msu.edu.</p>
<section id="questions-to-answer" class="level3" data-number="10.1">
<h3 data-number="10.1" class="anchored" data-anchor-id="questions-to-answer"><span class="header-section-number">10.1</span> Questions to answer</h3>
<p>Answer the following in comments inside your application script:</p>
<ol type="1">
<li><p>What was your level of comfort with the lesson/application?</p></li>
<li><p>What areas of the lesson/application confused or still confuses you?</p></li>
<li><p>What are some things you would like to know more about that is related to, but not covered in, this lesson?</p></li>
</ol>
</section>
</section>
<section id="extension-functions-without-arguments" class="level2" data-number="11">
<h2 data-number="11" class="anchored" data-anchor-id="extension-functions-without-arguments"><span class="header-section-number">11</span> Extension: Functions without arguments</h2>
<p>Most of the time you need to include arguments when you call a function.</p>
<p>&nbsp;</p>
<p>There are exceptions. For instance <strong><em>c()</em></strong>, which creates a vector, is often used without an argument, which means the vector initially has no values (i.e., a <strong><em>NULL</em></strong> vector):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>vec1 <span class="ot">=</span> <span class="fu">c</span>();         <span class="co"># a vector that initially has no values (an empty vector) </span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>vec2 <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">9</span>,<span class="dv">1</span>);  <span class="co"># a vector with four values</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24" data-tab="Environment"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>vec1<span class="sc">:</span> <span class="cn">NULL</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>vec2<span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>] <span class="dv">5</span> <span class="dv">2</span> <span class="dv">9</span> <span class="dv">1</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>You could also call <strong><em>cat()</em></strong> without any arguments, and R will display nothing:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25" data-tab="Console"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">cat</span>()</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong><em>date()</em></strong> is a simple enough function that you do not need any arguments:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26" data-tab="Console"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">date</span>()</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Fri Sep 19 10:17:29 2025"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="sec-r-base-mean" class="level2" data-number="12">
<h2 data-number="12" class="anchored" data-anchor-id="sec-r-base-mean"><span class="header-section-number">12</span> Extension: The R-base mean() function</h2>
<p>For a little refresher of R-base functions and their components, let’s look at the built-in R function <strong><em>mean()</em></strong>. When calling a function, there are three things the caller must know: name, arguments, and return value. The <strong><em>Help</em></strong> tab for a function gives these:</p>
<div id="fig-meanFunction" class="fs quarto-float quarto-figure quarto-figure-left anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-meanFunction-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/clipboard-662320927.png" class="fs img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-meanFunction-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Name, arguments, and return value for the function mean() in the Help tab
</figcaption>
</figure>
</div>
<section id="name" class="level3" data-number="12.1">
<h3 data-number="12.1" class="anchored" data-anchor-id="name"><span class="header-section-number">12.1</span> Name</h3>
<p>Functions, like variables, are named objects that stores information.&nbsp; The difference is that <span class="hl">variables store values</span> whereas <span class="hl">functions store script</span>.</p>
<p>&nbsp;</p>
<p>The name of the function in <a href="#fig-meanFunction" class="quarto-xref">Figure&nbsp;1</a> is <strong><em>mean()</em></strong>. When referring to a function, we often put parentheses after the name to indicate that this object is a function, not a variable.</p>
</section>
<section id="arguments-inputs-to-a-function" class="level3" data-number="12.2">
<h3 data-number="12.2" class="anchored" data-anchor-id="arguments-inputs-to-a-function"><span class="header-section-number">12.2</span> Arguments (inputs to a function)</h3>
<p><span class="hl">Arguments are variables</span> whose values are supplied by the caller and used by the function.</p>
<p>&nbsp;</p>
<p>In the <strong><em>Help</em></strong> tab (<a href="#fig-meanFunction" class="quarto-xref">Figure&nbsp;1</a>) we see that the <strong><em>Default S3 Method</em></strong> (the most commonly used method) for <strong><em>mean()</em></strong> has three arguments (<strong><em>x</em></strong>, <strong><em>trim</em></strong>, <strong><em>na.rm</em></strong>).</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x, <span class="at">trim =</span> <span class="dv">0</span>, <span class="at">na.rm =</span> <span class="cn">FALSE</span>, ...)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>In this case, <strong><em>x</em></strong> is the vector of values that the caller want to find the mean for. <span class="note">Note: <strong><em>x</em></strong> is often used by R as a generic argument for input values.</span></p>
<p>&nbsp;</p>
<p>The other two arguments, <strong><em>trim</em></strong> and <strong><em>na.rm</em></strong>, are tweaks to <strong><em>mean()</em></strong> that give <strong><em>mean()</em></strong> more functionality. <strong><em>trim</em></strong> can be used to remove extreme values and <strong><em>na.rm</em></strong> can be used to ignore <strong>NA</strong> values. <strong><em>trim</em></strong> and <strong><em>na.rm</em></strong> have <span class="hl">default values</span> <code>(trim = 0, na.rm= FALSE)</code> meaning the caller does not need to provide values for these arguments unless they want to change the default functionality of <strong><em>mean()</em></strong>.</p>
<p>&nbsp;</p>
<p><a href="#extension-functions-without-arguments">Extension: Functions without arguments</a></p>
</section>
<section id="return-value-output-of-a-function" class="level3" data-number="12.3">
<h3 data-number="12.3" class="anchored" data-anchor-id="return-value-output-of-a-function"><span class="header-section-number">12.3</span> Return value (output of a function)</h3>
<p>When a caller calls a function, they usually expect to get some information back from the function. In the case of <strong><em>mean()</em></strong>, the caller is expecting the mean value of the vector provided as an argument. The <strong><em>Value</em></strong> section of <a href="#fig-meanFunction" class="quarto-xref">Figure&nbsp;1</a> gives information about what the function is returning to the caller. <strong><em>mean()</em></strong> returns a <span class="hl">length-one object</span>.</p>
<p>&nbsp;</p>
<p>In other words, the return value from <strong><em>mean()</em></strong> is one value: the mean.</p>
</section>
<section id="using-a-function" class="level3" data-number="12.4">
<h3 data-number="12.4" class="anchored" data-anchor-id="using-a-function"><span class="header-section-number">12.4</span> Using a function</h3>
<p>We will call <strong><em>mean()</em></strong> multiple times with the same vector of values but changing the arguments. One value in the vector is <strong><em>NA</em></strong>, which we need to deal with because the mean of any vector with an <strong><em>NA</em></strong> value is <strong><em>NA</em></strong>. <span class="note">Note: this was covered in more detail in <a href="1-05_Functions_Introduction.html#sec-median-NA">lesson 5 with <strong><em>median()</em></strong></a>.</span></p>
<p>&nbsp;</p>
<p>There are four calls below to the function <strong><em>mean()</em></strong>. Each call passes in one or more argument value, and saves the return value from the function to the variables named <strong><em>meanBase1</em></strong>, <strong><em>meanBase2</em></strong>, <strong><em>meanBase3</em></strong>, and <strong><em>meanBase4</em></strong>.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28" data-tab="1-13_Functions_Main.R"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>testVector <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">5</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">100</span>, <span class="dv">10</span>); <span class="co"># has an NA value</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>meanBase1 <span class="ot">=</span> <span class="fu">mean</span>(<span class="at">x=</span>testVector);               <span class="co"># uses default for na.rm, which is FALSE</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>meanBase2 <span class="ot">=</span> <span class="fu">mean</span>(<span class="at">x=</span>testVector, <span class="at">na.rm=</span><span class="cn">FALSE</span>);  <span class="co"># same as above</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>meanBase3 <span class="ot">=</span> <span class="fu">mean</span>(<span class="at">x=</span>testVector, <span class="at">na.rm=</span><span class="cn">TRUE</span>);   <span class="co"># remove NAs</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>meanBase4 <span class="ot">=</span> <span class="fu">mean</span>(<span class="at">x=</span>testVector, <span class="at">na.rm=</span><span class="cn">TRUE</span>, <span class="at">trim=</span><span class="fl">0.1</span>);  <span class="co"># remove NAs and trims high and low value</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>In the <strong><em>Environment</em></strong> we can see the return values stored in the variables.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29" data-tab="Environment"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>meanBase1<span class="sc">:</span> <span class="cn">NA_real_</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>meanBase2<span class="sc">:</span> <span class="cn">NA_real_</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>meanBase3<span class="sc">:</span> <span class="sc">-</span><span class="dv">12</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>meanBase4<span class="sc">:</span> <span class="dv">10</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li><p><strong><em>meanBase1</em></strong> and <strong><em>meanBase2</em></strong> are <strong><em>NA_real</em></strong> because there was an unignored <strong><em>NA</em></strong> value in the vector and we did not choose to remove the <strong><em>NA</em></strong>. <span class="note">note: <strong><em>NA_real_</em></strong> means the value is <strong><em>NA</em></strong> but would be a real number if it was not <strong><em>NA</em></strong>.</span></p></li>
<li><p><strong><em>meanBase3</em></strong> is <strong>-12</strong>, the mean of the values when the <strong><em>NA</em></strong> is removed</p></li>
<li><p><strong><em>meanBase4</em></strong> is <strong>10</strong>, the mean of the values when the high (15) and low (-100) values are also removed. <span class="note">Note: trim=0.1 means trim top and bottom 10%.</span></p></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>