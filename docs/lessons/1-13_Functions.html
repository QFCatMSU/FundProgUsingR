<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>1-13: Functions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-0ee72de42c60dbd072a9e85558b70db9.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="shortcut icon" href="https://qfcatmsu.github.io/assets/images/qfc_icon.png">
<script>mod=true; // menuCollapse=true;</script>
<script src="https://qfcatmsu.github.io/assets/quarto/qfc_styles.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="https://qfcatmsu.github.io/assets/quarto/qfc_styles.css">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <a class="flex-grow-1 no-decor" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
          <h1 class="quarto-secondary-nav-title">1-13: Functions</h1>
        </a>     
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="quarto-sidebar-header"><div class="sidebar-header-item">
<p>I, Charlie, will be on vacation from Sept 28 - Oct 8. I will occasionally check email but don’t expect quick responses during this time!</p>
</div></div>
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text"><b>Fundamentals of Programming class</b></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/0-01-IntroductionAndSyllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction and Syllabus</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Part 1: Basic Programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-01-RStudioProjectsSetup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-01: RStudio Projects Setup</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-02-Variables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-02: Variables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-03_Mathematical_Operations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-03: Mathematical Operations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-04_Vectors_And_Data_Frames.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-04: Vectors and Data Frames</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-05_Functions_Introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-05: Functions Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-06_Run_and_Source.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-06: Run and Source</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-07_Outputs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-07: Outputs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-08_Conditional_Operations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-08: Conditional Operations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-09_If_Else_Statements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-09: If-Else Statements</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-10_For_Loops.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-10: For Loops</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-11_For_Loops_and_State_Varibles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-11: For Loops and State Variables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-12_MultipleConditions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-12: Multiple Conditions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-13_Functions.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">1-13: Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-14_Functions2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-14: Functions 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/1-15_Nested_Loops_and _Matrices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1-15: Nested loops and Matrices</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Part 2: Data Programming</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-01_GGPlot_Intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-01: GGPlot Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-02_DataFrame_Modifications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-02: DataFrame Modifications</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-03_DataTypesAndDateFrames.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-03: Data Types and Data Frames</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-04_WhichStatements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-04: Which Statements</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-05_WhichAndSubstrings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-05: Which and Substrings</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-06_Datetime_Objects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-06: Datetime objects</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-07_Matrices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-07: Matrices</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-08_Binding_Sampling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-08: Binding and Sampling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-09_Stacking_Mapping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-09: Stacking and Mapping</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-10_Statistical_Tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-10: Statistical Tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-11_Objects_Attributes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-11: Objects and Attributes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-12_Lists.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-12: Lists</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-13_Breakpoints.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-13: Breakpoints</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/2-14_Debug_External_Scripts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2-14: Debugging External Scripts (Unfinished)</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title"><b>Lesson Content</b></h2>
   
  <ul>
  <li><a href="#future-changes" id="toc-future-changes" class="nav-link active" data-scroll-target="#future-changes"><span class="header-section-number">0.1</span> Future changes</a></li>
  <li><a href="#purpose" id="toc-purpose" class="nav-link" data-scroll-target="#purpose"><span class="header-section-number">1</span> Purpose</a></li>
  <li><a href="#sec-downloads" id="toc-sec-downloads" class="nav-link" data-scroll-target="#sec-downloads"><span class="header-section-number">2</span> Questions about the material…</a></li>
  <li><a href="#four-structures-in-programming" id="toc-four-structures-in-programming" class="nav-link" data-scroll-target="#four-structures-in-programming"><span class="header-section-number">3</span> Four structures in programming</a></li>
  <li><a href="#reusable-scripts" id="toc-reusable-scripts" class="nav-link" data-scroll-target="#reusable-scripts"><span class="header-section-number">4</span> Reusable scripts</a></li>
  <li><a href="#parts-of-a-function" id="toc-parts-of-a-function" class="nav-link" data-scroll-target="#parts-of-a-function"><span class="header-section-number">5</span> Parts of a function</a>
  <ul class="collapse">
  <li><a href="#name" id="toc-name" class="nav-link" data-scroll-target="#name"><span class="header-section-number">5.1</span> Name</a></li>
  <li><a href="#arguments-inputs-to-a-function" id="toc-arguments-inputs-to-a-function" class="nav-link" data-scroll-target="#arguments-inputs-to-a-function"><span class="header-section-number">5.2</span> Arguments (inputs to a function)</a></li>
  <li><a href="#codeblock" id="toc-codeblock" class="nav-link" data-scroll-target="#codeblock"><span class="header-section-number">5.3</span> Codeblock</a></li>
  <li><a href="#return-value-output-of-a-function" id="toc-return-value-output-of-a-function" class="nav-link" data-scroll-target="#return-value-output-of-a-function"><span class="header-section-number">5.4</span> Return value (output of a function)</a></li>
  <li><a href="#using-a-function" id="toc-using-a-function" class="nav-link" data-scroll-target="#using-a-function"><span class="header-section-number">5.5</span> Using a function</a></li>
  </ul></li>
  <li><a href="#using-a-function-script" id="toc-using-a-function-script" class="nav-link" data-scroll-target="#using-a-function-script"><span class="header-section-number">6</span> Using a function script</a>
  <ul class="collapse">
  <li><a href="#function-header" id="toc-function-header" class="nav-link" data-scroll-target="#function-header"><span class="header-section-number">6.1</span> Function header</a></li>
  <li><a href="#sources-the-functions-script" id="toc-sources-the-functions-script" class="nav-link" data-scroll-target="#sources-the-functions-script"><span class="header-section-number">6.2</span> Sources the functions script</a></li>
  <li><a href="#parts-of-the-functions" id="toc-parts-of-the-functions" class="nav-link" data-scroll-target="#parts-of-the-functions"><span class="header-section-number">6.3</span> Parts of the functions</a></li>
  </ul></li>
  <li><a href="#using-the-function-script" id="toc-using-the-function-script" class="nav-link" data-scroll-target="#using-the-function-script"><span class="header-section-number">7</span> Using the function script</a>
  <ul class="collapse">
  <li><a href="#header-line-of-a-function" id="toc-header-line-of-a-function" class="nav-link" data-scroll-target="#header-line-of-a-function"><span class="header-section-number">7.1</span> Header line of a function</a></li>
  <li><a href="#function-codeblock" id="toc-function-codeblock" class="nav-link" data-scroll-target="#function-codeblock"><span class="header-section-number">7.2</span> Function codeblock</a></li>
  <li><a href="#return-value" id="toc-return-value" class="nav-link" data-scroll-target="#return-value"><span class="header-section-number">7.3</span> Return value</a></li>
  <li><a href="#calling-the-function" id="toc-calling-the-function" class="nav-link" data-scroll-target="#calling-the-function"><span class="header-section-number">7.4</span> Calling the function</a></li>
  </ul></li>
  <li><a href="#mean_adv" id="toc-mean_adv" class="nav-link" data-scroll-target="#mean_adv"><span class="header-section-number">8</span> mean_adv</a>
  <ul class="collapse">
  <li><a href="#header-line-of-a-function-1" id="toc-header-line-of-a-function-1" class="nav-link" data-scroll-target="#header-line-of-a-function-1"><span class="header-section-number">8.1</span> Header line of a function</a></li>
  <li><a href="#sec-mean_adv_code" id="toc-sec-mean_adv_code" class="nav-link" data-scroll-target="#sec-mean_adv_code"><span class="header-section-number">8.2</span> Codeblock</a></li>
  <li><a href="#return-value-1" id="toc-return-value-1" class="nav-link" data-scroll-target="#return-value-1"><span class="header-section-number">8.3</span> return value</a></li>
  <li><a href="#using-the-function" id="toc-using-the-function" class="nav-link" data-scroll-target="#using-the-function"><span class="header-section-number">8.4</span> Using the function</a></li>
  </ul></li>
  <li><a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><span class="header-section-number">9</span> Application</a>
  <ul class="collapse">
  <li><a href="#questions-to-answer" id="toc-questions-to-answer" class="nav-link" data-scroll-target="#questions-to-answer"><span class="header-section-number">9.1</span> Questions to answer</a></li>
  </ul></li>
  <li><a href="#sec-meanCodeblock" id="toc-sec-meanCodeblock" class="nav-link" data-scroll-target="#sec-meanCodeblock"><span class="header-section-number">10</span> Extension: getAnywhere() and mean()</a></li>
  <li><a href="#extension-functions-without-arguments" id="toc-extension-functions-without-arguments" class="nav-link" data-scroll-target="#extension-functions-without-arguments"><span class="header-section-number">11</span> Extension: Functions without arguments</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">1-13: Functions</h1>
</div>



<div class="quarto-title-meta column-page-right">

    
  
    
  </div>
  


</header>


<section id="future-changes" class="level3" data-number="0.1">
<h3 data-number="0.1" class="anchored" data-anchor-id="future-changes"><span class="header-section-number">0.1</span> Future changes</h3>
<ul>
<li>introduce very simple functions first (Hello / power)</li>
</ul>
</section>
<section id="purpose" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="purpose"><span class="header-section-number">1</span> Purpose</h2>
<ul>
<li><p>Create reusable code (a function)</p></li>
<li><p>Use arguments in functions</p></li>
<li><p>Use return values in functions</p></li>
</ul>
</section>
<section id="sec-downloads" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="sec-downloads"><span class="header-section-number">2</span> Questions about the material…</h2>
<p>The files for this lesson:</p>
<ul>
<li><p>Main Script:&nbsp;<a href="../scripts/1-13_Functions.R">download the main script here</a></p></li>
<li><p>Function Script: <a href="../scripts/1-13_myFunctions.R">download the function script here</a></p></li>
</ul>
<p>&nbsp;</p>
<p><span class="hl">Function scripts should never include <code>rm(list=ls())</code>.</span> Function scripts are extensions of the main script. Calling <code>rm(list=ls())</code> from the function script would clear the <strong><em>Environment</em></strong> on variables and function the main script put in.</p>
<p>&nbsp;</p>
<p>If you have any questions about the material in this lesson, feel free to email them to the instructor, Charlie Belinsky, at belinsky@msu.edu.</p>
</section>
<section id="four-structures-in-programming" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="four-structures-in-programming"><span class="header-section-number">3</span> Four structures in programming</h2>
<p>Once again, there are basically 4 main structures that cover almost every aspect of programming:</p>
<ol type="1">
<li><p>Variables</p></li>
<li><p>If-Else Statements</p></li>
<li><p>For Loops</p></li>
<li><p>Functions</p></li>
</ol>
<p>&nbsp;</p>
<p>And now we have reached the last structure: functions, which we will cover in the next few lessons. Functions allow you to write code once and reuse it as opposed to writing the same code multiple times.&nbsp;</p>
</section>
<section id="reusable-scripts" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="reusable-scripts"><span class="header-section-number">4</span> Reusable scripts</h2>
<p>Functions are self-contained codeblocks that performs a common task. For example, there are statistical functions that take a vector of values and return the statistical value (e.g., <strong><em>mean()</em></strong> and <strong><em>median()</em></strong>), functions that take data and create plots (e.g., <strong><em>plot(), boxplot()</em></strong>), and functions that interact with the <strong><em>Console</em></strong> (e.g., <strong><em>cat()</em></strong> and <strong><em>print()</em></strong>). The functions listed above are come with R and are designed to be used in any script.</p>
<p>&nbsp;</p>
<p>Broadly, there are three types of functions in R:</p>
<p>1) Base-R: these are function that come with R</p>
<p>2) Packages: extensions of R (e.g., <strong><em>ggplot2</em></strong>, <strong><em>tidyverse</em></strong> – covered later in class)</p>
<p>3) User-created: the main focus of the next few lessons</p>
</section>
<section id="parts-of-a-function" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="parts-of-a-function"><span class="header-section-number">5</span> Parts of a function</h2>
<p>All functions, whether base-R, in packages, or user-created, have the same four components: <strong>name</strong>, <strong>arguments</strong>, <strong><em>codeblock</em></strong>, and <strong>return value</strong>.&nbsp;</p>
<p>&nbsp;</p>
<p>The <strong><em>Help</em></strong> tab for a function shows all components except the codeblock. In this case, the statistical function, <strong><em>mean()</em></strong>:</p>
<div id="fig-meanFunction" class="fs quarto-float quarto-figure quarto-figure-left anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-meanFunction-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/clipboard-662320927.png" class="fs img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-meanFunction-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Name, arguments, and return value for the function mean() in the Help tab
</figcaption>
</figure>
</div>
<section id="name" class="level3" data-number="5.1">
<h3 data-number="5.1" class="anchored" data-anchor-id="name"><span class="header-section-number">5.1</span> Name</h3>
<p>Functions, like variables, are named objects that stores information.&nbsp; The difference is that <span class="hl">variables store values</span> whereas <span class="hl">functions store script</span>.</p>
<p>&nbsp;</p>
<p>The name of the function in <a href="#fig-meanFunction" class="quarto-xref">Figure&nbsp;1</a> is <strong><em>mean()</em></strong>. When referring to a function, we often put parentheses after the name to indicate that this object is a function, not a variable.</p>
</section>
<section id="arguments-inputs-to-a-function" class="level3" data-number="5.2">
<h3 data-number="5.2" class="anchored" data-anchor-id="arguments-inputs-to-a-function"><span class="header-section-number">5.2</span> Arguments (inputs to a function)</h3>
<p><span class="hl">Arguments are variables</span> whose values are supplied by the caller and used by the function.</p>
<p>&nbsp;</p>
<p>In the <strong><em>Help</em></strong> tab (<a href="#fig-meanFunction" class="quarto-xref">Figure&nbsp;1</a>) we see that the <strong><em>Default S3 Method</em></strong> (the most commonly used method) for <strong><em>mean()</em></strong> has three arguments (<strong><em>x</em></strong>, <strong><em>trim</em></strong>, <strong><em>na.rm</em></strong>).</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x, <span class="at">trim =</span> <span class="dv">0</span>, <span class="at">na.rm =</span> <span class="cn">FALSE</span>, ...)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>In this case, <strong><em>x</em></strong> is the vector of values that the caller want to find the mean for. <span class="note">Note: <strong><em>x</em></strong> is often used by R as a generic argument for input values.</span></p>
<p>&nbsp;</p>
<p>The other two arguments, <strong><em>trim</em></strong> and <strong><em>na.rm</em></strong>, are tweaks to <strong><em>mean()</em></strong> that give <strong><em>mean()</em></strong> more functionality. <strong><em>trim</em></strong> can be used to remove extreme values and <strong><em>na.rm</em></strong> can be used to ignore <strong>NA</strong> values. <strong><em>trim</em></strong> and <strong><em>na.rm</em></strong> have <span class="hl">default values</span> <code>(trim = 0, na.rm= FALSE)</code> meaning the caller does not need to provide values for these arguments unless they want to change the default functionality of <strong><em>mean()</em></strong>.</p>
<p>&nbsp;</p>
<p><a href="#extension-functions-without-arguments">Extension: Functions without arguments</a></p>
</section>
<section id="codeblock" class="level3" data-number="5.3">
<h3 data-number="5.3" class="anchored" data-anchor-id="codeblock"><span class="header-section-number">5.3</span> Codeblock</h3>
<p>In order to interact with a function, the caller needs to know the functions’ (1) name, (2) arguments, and (3) return value. The caller generally does not need to know the code inside the codeblock, so this code is usually hidden from the caller.</p>
<p>&nbsp;</p>
<p>You can see the codeblock for <strong><em>mean()</em></strong> using this code in <strong><em>Console</em></strong>:</p>
<p><code>&gt; getAnywhere("mean.default");</code></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" data-tab="Console"><pre class="sourceCode R code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (x, <span class="at">trim =</span> <span class="dv">0</span>, <span class="at">na.rm =</span> <span class="cn">FALSE</span>, ...) </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>«{»</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(x) <span class="sc">&amp;&amp;</span> <span class="sc">!</span><span class="fu">is.complex</span>(x) <span class="sc">&amp;&amp;</span> <span class="sc">!</span><span class="fu">is.logical</span>(x)) {</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">warning</span>(<span class="st">"argument is not numeric or logical: returning NA"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">return</span>(<span class="cn">NA_real_</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">isTRUE</span>(na.rm)) </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>        x <span class="ot">&lt;-</span> x[<span class="sc">!</span><span class="fu">is.na</span>(x)]</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(trim) <span class="sc">||</span> <span class="fu">length</span>(trim) <span class="sc">!=</span> <span class="dv">1</span>L) </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">"'trim' must be numeric of length one"</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    n <span class="ot">&lt;-</span> <span class="fu">length</span>(x)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (trim <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;&amp;</span> n) {</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">is.complex</span>(x)) </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>            <span class="fu">stop</span>(<span class="st">"trimmed means are not defined for complex data"</span>)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">anyNA</span>(x)) </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>            <span class="fu">return</span>(<span class="cn">NA_real_</span>)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (trim <span class="sc">&gt;=</span> <span class="fl">0.5</span>) </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>            <span class="fu">return</span>(stats<span class="sc">::</span><span class="fu">median</span>(x, <span class="at">na.rm =</span> <span class="cn">FALSE</span>))</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>        lo <span class="ot">&lt;-</span> <span class="fu">floor</span>(n <span class="sc">*</span> trim) <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>        hi <span class="ot">&lt;-</span> n <span class="sc">+</span> <span class="dv">1</span> <span class="sc">-</span> lo</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>        x <span class="ot">&lt;-</span> <span class="fu">sort.int</span>(x, <span class="at">partial =</span> <span class="fu">unique</span>(<span class="fu">c</span>(lo, hi)))[lo<span class="sc">:</span>hi]</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.Internal</span>(<span class="fu">mean</span>(x))</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>«}»</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>For a full explanation of why you need to use <strong><em>mean.default()</em></strong> instead of <strong><em>mean()</em></strong> go to <a href="#sec-meanCodeblock">Extension: codeblock for mean()</a></p>
<p>&nbsp;</p>
<p>The main takeaway is that, like <strong><em>if-else</em></strong> statements and <strong><em>for</em></strong> loops, all functions have an associated codeblock that is designated by curly bracket ( <code>{ }</code> ). We will see more function codeblocks when we look at the function script for this lesson.</p>
</section>
<section id="return-value-output-of-a-function" class="level3" data-number="5.4">
<h3 data-number="5.4" class="anchored" data-anchor-id="return-value-output-of-a-function"><span class="header-section-number">5.4</span> Return value (output of a function)</h3>
<p>When a caller calls a function, they usually expect to get some information back from the function. In the case of <strong><em>mean()</em></strong>, the caller is expecting the mean value of the vector provided as an argument. The <strong><em>Value</em></strong> section of <a href="#fig-meanFunction" class="quarto-xref">Figure&nbsp;1</a> gives information about what the function is returning to the caller. <strong><em>mean()</em></strong> returns a <span class="hl">length-one object</span>.</p>
<p>&nbsp;</p>
<p>In other words, the return value from <strong><em>mean()</em></strong> is one value: the mean.</p>
</section>
<section id="using-a-function" class="level3" data-number="5.5">
<h3 data-number="5.5" class="anchored" data-anchor-id="using-a-function"><span class="header-section-number">5.5</span> Using a function</h3>
<p>We will call <strong><em>mean()</em></strong> multiple times with the same vector of values but changing the arguments. One value in the vector is <strong><em>NA</em></strong>, which we need to deal with because the mean of any vector with an <strong><em>NA</em></strong> value is <strong><em>NA</em></strong>. <span class="note">Note: this was covered in more detail in <a href="1-05_Functions_Introduction.html#sec-median-NA">lesson 5 with <strong><em>median()</em></strong></a>.</span></p>
<p>&nbsp;</p>
<p>There are four calls below to the function <strong><em>mean()</em></strong>. Each call passes in one or more argument value, and saves the return value from the function to the variables named <strong><em>ret1</em></strong>, <strong><em>ret2</em></strong>, <strong><em>ret3</em></strong>, and <strong><em>ret4</em></strong>.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>testVector <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">5</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">100</span>, <span class="dv">10</span>);  <span class="co"># has an NA value</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>ret1a <span class="ot">=</span> <span class="fu">mean</span>(<span class="at">x=</span>testVector);               <span class="co"># uses default for na.rm, which is FALSE</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>ret1b <span class="ot">=</span> <span class="fu">mean</span>(<span class="at">x=</span>testVector, <span class="at">na.rm=</span><span class="cn">FALSE</span>);  <span class="co"># same as above</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>ret1c <span class="ot">=</span> <span class="fu">mean</span>(<span class="at">x=</span>testVector, <span class="at">na.rm=</span><span class="cn">TRUE</span>);   <span class="co"># remove NAs</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>ret1d <span class="ot">=</span> <span class="fu">mean</span>(<span class="at">x=</span>testVector, <span class="at">na.rm=</span><span class="cn">TRUE</span>, <span class="at">trim=</span><span class="fl">0.1</span>);  <span class="co"># remove NAs and trims high and low value</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>In the <strong><em>Environment</em></strong> we can see the return values stored in the variables.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" data-tab="Environment"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>ret1a<span class="sc">:</span> <span class="cn">NA_real_</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>ret1b<span class="sc">:</span> <span class="cn">NA_real_</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>ret1c<span class="sc">:</span> <span class="sc">-</span><span class="dv">12</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>ret1d<span class="sc">:</span> <span class="dv">10</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li><p><strong><em>ret1</em></strong> and <strong><em>ret2</em></strong> are <strong><em>NA_real</em></strong> because there was an unignored <strong><em>NA</em></strong> value in the vector and we did not choose to remove the <strong><em>NA</em></strong>. <span class="note">note: <strong><em>NA_real_</em></strong> means the value is <strong><em>NA</em></strong> but would be a real number if it was not <strong><em>NA</em></strong>.</span></p></li>
<li><p><strong><em>ret3</em></strong> is <strong>-12</strong>, the mean of the values when the <strong><em>NA</em></strong> is removed</p></li>
<li><p><strong><em>ret4</em></strong> is <strong>10</strong>, the mean of the values when the high (15) and low (-100) values are also removed. <span class="note">Note: trim=0.1 means trim top and bottom 10%.</span></p></li>
</ul>
</section>
</section>
<section id="using-a-function-script" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="using-a-function-script"><span class="header-section-number">6</span> Using a function script</h2>
<p>So far we have used base-R functions. Now we will use the user-generated functions from script for the lesson named <strong><em>1-13_myFunctions.R</em></strong> (in <a href="#sec-downloads" class="quarto-xref">Section&nbsp;2</a>).</p>
<section id="function-header" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="function-header"><span class="header-section-number">6.1</span> Function header</h3>
<p>In <strong><em>1-13_myFunctions.R</em></strong>, there are two functions that calculate mean called <strong><em>mean_class()</em></strong> and <strong><em>mean_adv()</em></strong>. Both functions have an argument named <strong><em>vec</em></strong>, which contains the values that the caller want to find the mean for. <strong><em>mean_adv()</em></strong> has a second argument called <strong><em>removeNA</em></strong>, which is set to a default value of <strong><em>FALSE</em></strong>.</p>
<p>&nbsp;</p>
<p>The first line of a function is called the header and gives the names and arguments needed to use the function.</p>
<div id="fig-headers" class="quarto-float quarto-figure quarto-figure-left anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-headers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" data-tab="1-13_myFunctions.R"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>mean_class <span class="ot">=</span> <span class="cf">function</span>(vec)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>mean_adv <span class="ot">=</span> <span class="cf">function</span>(vec, <span class="at">removeNA =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-headers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Headers for the two functions in 1-13_myFunctions.R
</figcaption>
</figure>
</div>
</section>
<section id="sources-the-functions-script" class="level3" data-number="6.2">
<h3 data-number="6.2" class="anchored" data-anchor-id="sources-the-functions-script"><span class="header-section-number">6.2</span> Sources the functions script</h3>
<p>Since the functions are in a separate script, we must first read (<strong><em>source</em></strong>) the functions script before we can use the functions inside. In the main lesson script, <strong><em>1-13_Functions.R</em></strong>. we read in the functions script using <strong><em>source()</em></strong> and the path to the function script as the argument (in this case: <strong><em>scripts/myFunctions.R</em></strong>):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6" data-tab="1-13_Functions.R"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"scripts/1-13_myFunctions.R"</span>);</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The above code adds the two functions from <strong><em>1-13_myFunction.R</em></strong> to the <strong><em>Functions</em></strong> section of the <strong><em>Environment</em></strong>, giving the script the ability to use the functions.</p>
<div id="fig-sourceFunctions" class="quarto-float quarto-figure quarto-figure-left anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sourceFunctions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" data-tab="Environment"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>Functions</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>mean_adv<span class="sc">:</span>   <span class="cf">function</span> (vec, <span class="at">removeNA =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>mean_class<span class="sc">:</span> <span class="cf">function</span> (vec)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sourceFunctions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Environment after sourcing the functions script
</figcaption>
</figure>
</div>
<p><span class="note">note: <strong><em>source()</em></strong>, like the <strong><em>Source</em></strong> button, executes all code within a script</span></p>
</section>
<section id="parts-of-the-functions" class="level3" data-number="6.3">
<h3 data-number="6.3" class="anchored" data-anchor-id="parts-of-the-functions"><span class="header-section-number">6.3</span> Parts of the functions</h3>
<p>Looking at the two functions in <strong><em>1-13_myFunctions.R</em></strong>, we see the four components of a function:</p>
<ul>
<li><p><strong>name</strong>: <strong><em>mean_class()</em></strong> and <strong><em>mean_adv()</em></strong></p></li>
<li><p><strong>arguments</strong>:</p>
<ul>
<li><p><strong><em>mean_class()</em></strong> has one: <strong><em>vec</em></strong></p></li>
<li><p><strong><em>mean_adv()</em></strong> has two: <strong><em>vec</em></strong> and <strong><em>removeNA</em></strong></p></li>
</ul></li>
<li><p><strong>codeblock</strong>: everything between ( <strong>{</strong> ) and ( <strong>}</strong> ) – this is the code that gets executed when the function is called</p></li>
<li><p><strong>return value</strong>: both functions return the mean value using <strong><em>return()</em></strong></p></li>
</ul>
</section>
</section>
<section id="using-the-function-script" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="using-the-function-script"><span class="header-section-number">7</span> Using the function script</h2>
<p>The function, <strong><em>mean_class()</em></strong> solves for the mean by cycling through all the values in <strong><em>vec</em></strong> using a <strong><em>for</em></strong> loop, adds the values, and then dividing that by the number of values in <strong><em>vec</em></strong>.</p>
<section id="header-line-of-a-function" class="level3" data-number="7.1">
<h3 data-number="7.1" class="anchored" data-anchor-id="header-line-of-a-function"><span class="header-section-number">7.1</span> Header line of a function</h3>
<p>The first line of a function (i.e., the header) gives the name of the function (<strong><em>mean_class</em></strong>) and the arguments (<strong><em>vec</em></strong>):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>mean_class <span class="ot">=</span> <span class="cf">function</span>(vec)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong><em>vec</em></strong> is the vector that the caller wants to find the mean for. Since <strong><em>vec</em></strong> has no default value, <strong><em>vec</em></strong> must be supplied by the caller.</p>
</section>
<section id="function-codeblock" class="level3" data-number="7.2">
<h3 data-number="7.2" class="anchored" data-anchor-id="function-codeblock"><span class="header-section-number">7.2</span> Function codeblock</h3>
<p>Functions, just like <strong><em>if()</em></strong> and <strong><em>for()</em></strong>, have codeblocks attached to them that are executed when the function is called. The codeblock is encapsulated with curly brackets <strong>{ }</strong>.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>mean_class <span class="ot">=</span> <span class="cf">function</span>(«vec»)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>«{» <span class="co"># start function codeblock</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  vecAdded <span class="ot">=</span> <span class="dv">0</span>; <span class="do">### state variable -- starts at 0</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">### Use the for loop to cycle through all the values in vec and add them to vecAdded</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(«vec»))</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="do">### Adds the next value in vec</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    vecAdded <span class="ot">=</span> vecAdded <span class="sc">+</span> «vec»[i];</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="do">### Divide the total value by the number of values to get the mean</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  meanVal <span class="ot">=</span> vecAdded <span class="sc">/</span> <span class="fu">length</span>(«vec»);</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="do">### return the mean value to the caller</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  «<span class="fu">return</span>(meanVal)»;</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>«}» <span class="co"># end function codeblock</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>A function codeblock operates like any other R code with two exceptions:</p>
<ol type="1">
<li><p><span class="hl">The arguments in the function call are variables used in the codeblock</span>. So, the caller supplies the values for <strong><em>vec</em></strong> and the codeblock uses these value.</p></li>
<li><p><span class="hl">Functions usually return a value to the caller</span> using <strong><em>return()</em></strong>. In this case, <strong><em>meanVal</em></strong> is returned to the caller.</p></li>
</ol>
</section>
<section id="return-value" class="level3" data-number="7.3">
<h3 data-number="7.3" class="anchored" data-anchor-id="return-value"><span class="header-section-number">7.3</span> Return value</h3>
<p>To the caller a function acts largely like a block box that takes input (arguments) and has an output (the return value). The return value is sent to the caller using the function <strong><em>return()</em></strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(meanVal);</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>When the caller calls the function, they often set a variable equal to the function (e.g., <strong><em>retVal</em></strong> in the code below). The return value is stored in the variable set equal to the function:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>retVal <span class="ot">=</span> <span class="fu">mean_class</span>(<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">7</span>));  <span class="co"># saves the return value (4.25) to the variable retVal</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="calling-the-function" class="level3" data-number="7.4">
<h3 data-number="7.4" class="anchored" data-anchor-id="calling-the-function"><span class="header-section-number">7.4</span> Calling the function</h3>
<p>Remember that a function, like a variable, cannot be used unless it is put in your <strong><em>Environment</em></strong>, this is what <code>source("scripts/1-13_myFunctions.R")</code> does.</p>
<p>&nbsp;</p>
<p>We will call <strong><em>mean_class()</em></strong> multiple times and save the results to four different variables:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>ret2a <span class="ot">=</span> <span class="fu">mean_class</span>(<span class="at">vec=</span><span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">3</span>));        <span class="co"># 4.75</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ret2b = mean_class();                    # error because argument not provided</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>ret2c <span class="ot">=</span> <span class="fu">mean_class</span>(<span class="at">vec=</span><span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">8</span>,<span class="dv">3</span>));   <span class="co"># NA_Real because of the NA </span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>ret2d <span class="ot">=</span> <span class="fu">mean_class</span>(<span class="at">vec=</span><span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">3</span>,<span class="dv">75</span>,<span class="dv">200</span>)); <span class="co"># 49</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>anotherVec <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="sc">-</span><span class="dv">7</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">8</span>);</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>ret2e <span class="ot">=</span> <span class="fu">mean_class</span>(<span class="at">vec=</span>anotherVec);        <span class="co"># can use a predefined vector</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Each call to the function <strong><em>mean()</em></strong> passes in a vector of values for the <strong><em>vec</em></strong> argument and saves the return value to a variable (<strong><em>ret2a</em></strong>, <strong><em>ret2b</em></strong>…). In the <strong><em>Environment</em></strong> we can see the return values stored in the variables.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13" data-tab="Environment"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>ret2a<span class="sc">:</span> <span class="fl">4.75</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>ret2c<span class="sc">:</span> <span class="cn">NA_real_</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>ret2d<span class="sc">:</span> <span class="dv">49</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>ret2e<span class="sc">:</span> <span class="dv">1</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="mean_adv" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="mean_adv"><span class="header-section-number">8</span> mean_adv</h2>
<p>Just like <strong><em>mean_class()</em></strong>, the function, <strong><em>mean_adv()</em></strong> solves for the mean by going through all the values in the supplied vector, adding them up, and then dividing that answer by the number of values in <strong><em>vec</em></strong>. The difference is that <strong><em>mean_adv()</em></strong> checks for <strong><em>NA</em></strong> values and gives the caller the option to remove them.</p>
<section id="header-line-of-a-function-1" class="level3" data-number="8.1">
<h3 data-number="8.1" class="anchored" data-anchor-id="header-line-of-a-function-1"><span class="header-section-number">8.1</span> Header line of a function</h3>
<p>The header for <strong><em>mean_adv()</em></strong> looks similar to <strong><em>mean_class()</em></strong> except there is a second argument, <strong><em>removeNA</em></strong>, and this argument has a default value of <strong>FALSE</strong>. This means if the caller does not set <strong><em>removeNA</em></strong>, it will be <strong>FALSE</strong> (i.e., <strong><em>NA</em></strong> values will <strong>not</strong> be removed).</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>mean_adv <span class="ot">=</span> <span class="cf">function</span>(vec, <span class="at">removeNA =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="sec-mean_adv_code" class="level3" data-number="8.2">
<h3 data-number="8.2" class="anchored" data-anchor-id="sec-mean_adv_code"><span class="header-section-number">8.2</span> Codeblock</h3>
<p>In the codeblock attached to <strong><em>mean_adv()</em></strong>, we need to conditionally handle the situation where <strong><em>NA</em></strong> values are to be removed, based on the value of the argument <strong><em>removeNA</em></strong>. We do this using an <code>if-else-if</code> structure inside the <code>for</code> loop.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>mean_adv <span class="ot">=</span> <span class="cf">function</span>(vec, <span class="at">removeNA =</span> <span class="cn">FALSE</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  vecAdded <span class="ot">=</span> <span class="dv">0</span>; <span class="do">### state variable -- starts at 0</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  numNA <span class="ot">=</span> <span class="dv">0</span>;    <span class="do">### second state variable that counts the number of NA values</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="do">### Use the for loop to cycle through all the values in vec and add them to vecAdded</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(vec))</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    «if»(<span class="fu">is.na</span>(vec[i]) <span class="sc">==</span> <span class="cn">FALSE</span>)  <span class="do">### If the value is not NA</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>      <span class="do">### Adds the next value in vec</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>      vecAdded <span class="ot">=</span> vecAdded <span class="sc">+</span> vec[i];</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    }«else if» (removeNA <span class="sc">==</span> <span class="cn">TRUE</span>)   <span class="do">## we have a NA value and want to remove it</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>      <span class="do">### Don't add the value, instead increase the number of NA by 1</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>      numNA <span class="ot">=</span> numNA <span class="sc">+</span><span class="dv">1</span>;</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    }«else if» (removeNA <span class="sc">==</span> <span class="cn">FALSE</span>)  <span class="do">## we have a NA value and don't want to remove it</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>      <span class="do">### We cannot solve for a mean with an NA so the return value has to be NA</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(<span class="cn">NA</span>);  <span class="co"># this will end the function</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>    <span class="do">### Divide the total value by the number of values that are not NA to get the mean</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    meanVal <span class="ot">=</span> vecAdded <span class="sc">/</span> ( <span class="fu">length</span>(vec) <span class="sc">-</span> numNA);</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>    <span class="do">### return the mean value to the caller</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(meanVal);</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>  }</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>There are three possible situations, hence three parts to the <strong><em>if-else-if</em></strong> structure:</p>
<ol type="1">
<li><code>if(is.na(vec[i]) == FALSE)  # The current vec value is not NA</code>
<ul>
<li>The <strong><em>i</em></strong><sup>th</sup> value is not <strong><em>NA</em></strong> (i.e., it’s a number), so add the number to the total</li>
</ul></li>
<li><code>else if (removeNA == TRUE)  # We have a NA value and want to remove it</code>
<ul>
<li>ignore the <strong><em>NA</em></strong> value and add 1 to the number of <strong><em>NA</em></strong> values</li>
</ul></li>
<li><code>else if (removeNA == FALSE) # We have a NA value and don't want to remove it</code>
<ul>
<li>at this point, we know the return value has to be <strong><em>NA</em></strong> – so return <strong><em>NA</em></strong></li>
</ul></li>
</ol>
</section>
<section id="return-value-1" class="level3" data-number="8.3">
<h3 data-number="8.3" class="anchored" data-anchor-id="return-value-1"><span class="header-section-number">8.3</span> return value</h3>
<p>Just like <strong><em>break</em></strong> immediately ends a <strong><em>for</em></strong> loop, <span class="hl"><strong><em>return()</em></strong> immediately ends a function</span>.</p>
<p>&nbsp;</p>
<p>There are two <strong><em>return()</em></strong> statements in this function:</p>
<ol type="1">
<li><p>Once an <strong><em>NA</em></strong> value is hit, and the caller did not ask for <strong><em>NA</em></strong> values to be removed. At this point we know the answer is <strong><em>NA</em></strong>. There is no point in checking any more values in the vector. We put a <strong><em>return()</em></strong> to end the function and pass <strong><em>NA</em></strong> back to the caller</p></li>
<li><p>At the end of the codeblock after the <strong><em>for</em></strong> loop cycles through all the values in the vector.</p></li>
</ol>
<p>&nbsp;</p>
<p>Since <code>return()</code> ends a function, only one <code>return()</code> can be executed per function call.</p>
</section>
<section id="using-the-function" class="level3" data-number="8.4">
<h3 data-number="8.4" class="anchored" data-anchor-id="using-the-function"><span class="header-section-number">8.4</span> Using the function</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>ret3a <span class="ot">=</span> <span class="fu">mean_adv</span>(<span class="at">vec=</span><span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">3</span>));       <span class="co"># 4.75</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ret3b = mean_adv();                   # will cause error because argument not provided </span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>ret3c <span class="ot">=</span> <span class="fu">mean_adv</span>(<span class="at">vec=</span><span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">8</span>,<span class="dv">3</span>));  <span class="co"># will be NA (removeNA default is FALSE)</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>ret3d <span class="ot">=</span> <span class="fu">mean_adv</span>(<span class="at">vec=</span><span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">8</span>,<span class="dv">3</span>), <span class="at">removeNA =</span> <span class="cn">TRUE</span>);  <span class="co"># 4.75</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>ret3e <span class="ot">=</span> <span class="fu">mean_adv</span>(<span class="at">vec=</span><span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">3</span>, <span class="dv">75</span>,<span class="dv">200</span>)); <span class="co"># 49</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Each line of code above calls the function <strong><em>mean_adv()</em></strong>, passes in values for one or more arguments, and saves the return value from the function to a variable (<strong><em>ret3a</em></strong>, <strong><em>ret3b</em></strong>…). In the <strong><em>Environment</em></strong> we can see the return values stored in the variables.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17" data-tab="Environment"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>ret3a<span class="sc">:</span>  <span class="fl">4.75</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>ret3c<span class="sc">:</span>  <span class="cn">NA_real_</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>ret3d<span class="sc">:</span>  <span class="fl">4.75</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>ret3e<span class="sc">:</span>  <span class="dv">49</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="application" class="level2" data-number="9">
<h2 data-number="9" class="anchored" data-anchor-id="application"><span class="header-section-number">9</span> Application</h2>
<p>1) Setup your scripts</p>
<ol type="a">
<li><p>For this application you need to create two scripts:</p>
<ul>
<li><p>a functions script named <strong><em>app1-13_functions.r</em></strong> that contains the functions created in this application</p></li>
<li><p>a main script named <strong><em>app1-13.r</em></strong> where you will answer questions in comments and test the functions created in <strong><em>app1-13_functions.r</em></strong></p></li>
</ul></li>
<li><p><strong><em>source()</em></strong> your functions script from the main script</p></li>
<li><p><span class="hl">Make sure you thoroughly test all the functions you create in your main script.</span> I want to see the test code in <strong><em>app1-13.r</em></strong>.</p></li>
</ol>
<p>&nbsp;</p>
<p>2) For the function <strong><em>mean_adv()</em></strong>, answer the following questions in comments in the main script:</p>
<ol type="a">
<li><p>Why do we count the number of <strong><em>NA</em></strong>s?</p></li>
<li><p>For the two <strong><em>else if</em></strong> statements, what assumption can be made about the <strong><em>i</em></strong><sup>th</sup> value being checked? Why can we make this assumption?</p></li>
<li><p>Why does <strong><em>removeNA</em></strong> have a default value but <strong><em>vec</em></strong> does not?</p></li>
<li><p>Under what circumstances, if any, will this line <strong><em>not</em></strong> be executed?</p></li>
</ol>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>meanVal <span class="ot">=</span> vecAdded <span class="sc">/</span> ( <span class="fu">length</span>(vec) <span class="sc">-</span> numNA);</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>3) Create a function that returns either the standard deviation (default) or variance of a vector:</p>
<ul>
<li><p>There should be two arguments: (1) the vector and (2) something that allows the caller choose whether they want the standard deviation or the variance of the vector.</p></li>
<li><p>Do not use <strong><em>var()</em></strong> or <strong><em>sd()</em></strong> – use your own formula. You can use the code from application 1-03 as a starting point.</p></li>
</ul>
<p>&nbsp;</p>
<p>4) Create a function that converts a temperature from either Celsius to Fahrenheit (default) or Fahrenheit to Celsius</p>
<ul>
<li><p>The conversion from Celsius to Fahrenheit is: <span class="math inline">\(F=\frac{9}{5} C+32\)</span></p></li>
<li><p>The user needs to pass in two arguments: (1) the temperature value and (2) which direction they want to convert</p></li>
</ul>
<p>&nbsp;</p>
<p>5) Create a function that takes a single number from 0 to 100 and returns a grade from A to F.&nbsp;</p>
<ul>
<li>Return an error if the number is less than 0 and return a different error if the number is greater than 100.</li>
</ul>
<p>&nbsp;</p>
<p>6) Create a function that takes a vector of numbers and returns the percentage of values that are above 60.</p>
<ul>
<li><p>Have the function ignore values less than 0 or greater than 100</p></li>
<li><p>Test the function with 25 random numbers from -20 to 120</p>
<ul>
<li><code>sample(-20:120, size=25);</code></li>
</ul></li>
</ul>
<p>&nbsp;</p>
<p>Save the script as&nbsp;<strong><em>app1-13.r</em></strong> in your&nbsp;<strong><em>scripts</em></strong> folder and&nbsp; email your Project Folder to Charlie Belinsky at belinsky@msu.edu.</p>
<p>&nbsp;</p>
<p><a href="1-01-RStudioProjectsSetup.html#sec-zip-folder" target="_blank">Instructions for zipping the Project Folder are here.</a></p>
<p>&nbsp;</p>
<p>If you have any questions regarding this application, feel free to email them to Charlie Belinsky at belinsky@msu.edu.</p>
<section id="questions-to-answer" class="level3" data-number="9.1">
<h3 data-number="9.1" class="anchored" data-anchor-id="questions-to-answer"><span class="header-section-number">9.1</span> Questions to answer</h3>
<p>Answer the following in comments inside your application script:</p>
<ol type="1">
<li><p>What was your level of comfort with the lesson/application?</p></li>
<li><p>What areas of the lesson/application confused or still confuses you?</p></li>
<li><p>What are some things you would like to know more about that is related to, but not covered in, this lesson?</p></li>
</ol>
</section>
</section>
<section id="sec-meanCodeblock" class="level2 extension" data-number="10">
<h2 class="extension anchored" data-number="10" data-anchor-id="sec-meanCodeblock"><span class="header-section-number">10</span> Extension: getAnywhere() and mean()</h2>
<p><strong><em>getAnywhere()</em></strong> is a base-R function that allows you to see the codeblock attached to any base-R function. But if you pass in <strong><em>mean</em></strong> as the argument you get this:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19" data-tab="Console"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">getAnywhere</span>(<span class="st">"mean"</span>) </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>A single object matching ‘mean’ was found </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>It was found <span class="cf">in</span> the following places   </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  package<span class="sc">:</span>base   </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  namespace<span class="sc">:</span>base with value  </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (x, ...)  </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="fu">UseMethod</span>(<span class="st">"mean"</span>) <span class="sc">&lt;</span>bytecode<span class="sc">:</span> <span class="dv">0x000001c00fe2d450</span><span class="sc">&gt;</span> </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="er">&lt;</span>environment<span class="sc">:</span> namespace<span class="sc">:</span>base<span class="sc">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This is because <strong><em>mean()</em></strong> is a function that calls other functions depending on the argument type (e.g., numeric, string, date). This is sometimes called a <span class="hl">generic function</span>.</p>
<p>&nbsp;</p>
<p>To find the functions that <strong><em>mean()</em></strong> calls, we use <strong><em>methods()</em></strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20" data-tab="Console"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">methods</span>(<span class="st">"mean"</span>) </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] mean.Date     mean.default  mean.difftime mean.POSIXct  mean.POSIXlt </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>There are five possible calls. Four of the calls are related to times and dates. Only the second function, <strong><em>mean.default()</em></strong>, handles numbers (you can look this up in the <strong><em>Help</em></strong> tab). To see the codeblock for the function that handles numeric values, we need to pass <strong><em>mean.default</em></strong> into the argument of <strong><em>getAnywhere()</em></strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21" data-tab="Console"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">getAnywhere</span>(<span class="st">"mean.default"</span>);</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a> A single object matching ‘mean.default’ was found</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>It was found <span class="cf">in</span> the following places</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  package<span class="sc">:</span>base</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  registered S3 method <span class="cf">for</span> mean from namespace base</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  namespace<span class="sc">:</span>base</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>with value</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (x, <span class="at">trim =</span> <span class="dv">0</span>, <span class="at">na.rm =</span> <span class="cn">FALSE</span>, ...) </span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(x) <span class="sc">&amp;&amp;</span> <span class="sc">!</span><span class="fu">is.complex</span>(x) <span class="sc">&amp;&amp;</span> <span class="sc">!</span><span class="fu">is.logical</span>(x)) {</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">warning</span>(<span class="st">"argument is not numeric or logical: returning NA"</span>)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">return</span>(<span class="cn">NA_real_</span>)</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">isTRUE</span>(na.rm)) </span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>        x <span class="ot">&lt;-</span> x[<span class="sc">!</span><span class="fu">is.na</span>(x)]</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(trim) <span class="sc">||</span> <span class="fu">length</span>(trim) <span class="sc">!=</span> <span class="dv">1</span>L) </span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">"'trim' must be numeric of length one"</span>)</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>    n <span class="ot">&lt;-</span> <span class="fu">length</span>(x)</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (trim <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;&amp;</span> n) {</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">is.complex</span>(x)) </span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>            <span class="fu">stop</span>(<span class="st">"trimmed means are not defined for complex data"</span>)</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">anyNA</span>(x)) </span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>            <span class="fu">return</span>(<span class="cn">NA_real_</span>)</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (trim <span class="sc">&gt;=</span> <span class="fl">0.5</span>) </span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>            <span class="fu">return</span>(stats<span class="sc">::</span><span class="fu">median</span>(x, <span class="at">na.rm =</span> <span class="cn">FALSE</span>))</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>        lo <span class="ot">&lt;-</span> <span class="fu">floor</span>(n <span class="sc">*</span> trim) <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>        hi <span class="ot">&lt;-</span> n <span class="sc">+</span> <span class="dv">1</span> <span class="sc">-</span> lo</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>        x <span class="ot">&lt;-</span> <span class="fu">sort.int</span>(x, <span class="at">partial =</span> <span class="fu">unique</span>(<span class="fu">c</span>(lo, hi)))[lo<span class="sc">:</span>hi]</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.Internal</span>(<span class="fu">mean</span>(x))</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a><span class="sc">&lt;</span>bytecode<span class="sc">:</span> <span class="dv">0x000001c00fc0f500</span><span class="sc">&gt;</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a><span class="er">&lt;</span>environment<span class="sc">:</span> namespace<span class="sc">:</span>base</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="extension-functions-without-arguments" class="level2" data-number="11">
<h2 data-number="11" class="anchored" data-anchor-id="extension-functions-without-arguments"><span class="header-section-number">11</span> Extension: Functions without arguments</h2>
<p>Most of the time you need to include arguments when you call a function.</p>
<p>&nbsp;</p>
<p>There are exceptions. For instance <strong><em>c()</em></strong>, which creates a vector, is often used without an argument, which means the vector initially has no values (i.e., a <strong><em>NULL</em></strong> vector):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>vec1 <span class="ot">=</span> <span class="fu">c</span>();         <span class="co"># a vector that initially has no values (an empty vector) </span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>vec2 <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">9</span>,<span class="dv">1</span>);  <span class="co"># a vector with four values</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23" data-tab="Environment"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>vec1<span class="sc">:</span> <span class="cn">NULL</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>vec2<span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>] <span class="dv">5</span> <span class="dv">2</span> <span class="dv">9</span> <span class="dv">1</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>You could also call <strong><em>cat()</em></strong> without any arguments, and R will display nothing:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24" data-tab="Console"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">cat</span>()</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong><em>date()</em></strong> is a simple enough function that you do not need any arguments:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25" data-tab="Console"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">date</span>()</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Fri Sep 19 10:17:29 2025"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>